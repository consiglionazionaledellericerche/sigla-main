<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (C) 2019  Consiglio Nazionale delle Ricerche
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU Affero General Public License as
  ~     published by the Free Software Foundation, either version 3 of the
  ~     License, or (at your option) any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU Affero General Public License for more details.
  ~
  ~     You should have received a copy of the GNU Affero General Public License
  ~     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
                                       http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <property name="data_rifiuto_fattura" value="to_Date('06112020','ddmmyyyy')" dbms="oracle"/>
    <property name="data_rifiuto_fattura" value="timestamp '2020-11-06'" dbms="postgresql,h2"/>

    <changeSet author="marco.spasiano" id="addColumn-ti_bollo-voce_iva">
        <addColumn tableName="voce_iva">
            <column name="ti_bollo" type="CHAR(1)" defaultValue="N" remarks="Codice IVA soggetto a Bollo Dominio: S  =  Sì N  =  No D  =  Specifica Dicitura indicata su Configurazione CNR.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="configurazione_cnr-add-bollo-virtuale">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="BOLLO_VIRTUALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="DICITURA_PER_STAMPE"/>
            <column name="val01" type="STRING" value="Esente da imposta di bollo DPR 642/72"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="BOLLO_VIRTUALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="ANNOTAZIONE_ASSOLVIMENTO"/>
            <column name="val01" type="STRING" value="imposta di bollo assolta in modo virtuale ex DM 17/06/2014. Autorizzazione n° XXX del ..."/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr" dbms="oracle">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="BOLLO_VIRTUALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="IMPORTO_LIMITE"/>
            <column name="im01" type="NUMERIC" value="77,47"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr" dbms="postgres">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="BOLLO_VIRTUALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="IMPORTO_LIMITE"/>
            <column name="im01" type="NUMERIC" value="77.47"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="BOLLO_VIRTUALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CODICE_DOCUMENTO_FATTURA_ATTIVA"/>
            <column name="val01" type="STRING" value="25"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-gestione-bollo">
        <createTable remarks="Tabella contenente le tipologie di atti soggette a bollo." tableName="tipo_atto_bollo">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="codice" remarks="Codice identificativo dell''atto." type="VARCHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione dell''atto." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="desc_norma" remarks="Descrizione dell''articolo di  riferimento." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="im_bollo" remarks="Importo Unitario del Bollo" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="tipo_calcolo" remarks="Tipo Calcolo del Bollo (F= Foglio, E=Esemplare, I=Importo)" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="limite_calcolo" remarks="Valore necessario per calcolare l''importo totale del bollo da applicare" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="righe_foglio" remarks="Numero Righe per Foglio" type="INT"/>
            <column name="dt_ini_validita" remarks="Data Inizio Validita del bollo" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="dt_fin_validita" remarks="Data Fine Validita del bollo" type="${date.type}"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="tipo_atto_bollo_pkey" tableName="tipo_atto_bollo"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="load-table-gestione-bollo">
        <addDefaultValue tableName="tipo_atto_bollo" columnName="dacr" defaultValueDate="${now}"/>
        <addDefaultValue tableName="tipo_atto_bollo" columnName="duva" defaultValueDate="${now}"/>

        <loadData commentLineStartsWith="#" encoding="UTF-8"
                  file="bootstrap/csv-upgrade/tipo_atto_bollo.csv" quotchar="&quot;" separator="," tableName="tipo_atto_bollo">
            <column name="dt_ini_validita" type="${date.type}"/>
            <column name="dt_fin_validita" type="${date.type}"/>
        </loadData>

        <dropDefaultValue tableName="tipo_atto_bollo" columnName="dacr"/>
        <dropDefaultValue tableName="tipo_atto_bollo" columnName="duva"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-atto-bollo">
        <createTable remarks="Tabella contenente gli atti assoggettati a bollo." tableName="atto_bollo">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio" remarks="Esercizio di registrazione dell''atto assoggettato a bollo." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Codice UO che ha registrato l''atto assoggettato a bollo." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione_atto" remarks="Descrizione dell''atto assoggettato a bollo." type="VARCHAR(300)">
                <constraints nullable="false"/>
            </column>
            <column name="id_tipo_atto_bollo" remarks="Identificativo del tipo atto bollo." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="num_dettagli" remarks="Numero di dettagli su cui calcolare il bollo." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="num_righe" remarks="Numero di righe su cui calcolare il bollo." type="INT"/>
            <column name="num_registro" remarks="Progressivo, assegnato automaticamente per anno/UO." type="INT"/>
            <column name="cd_provv" remarks="Codice del provvedimento di registrazione dell''atto." type="VARCHAR(20)"/>
            <column name="nr_provv" remarks="Numero del provvedimento di registrazione dell''atto." type="BIGINT"/>
            <column name="dt_provv" remarks="Data del provvedimento di registrazione dell''atto." type="${date.type}"/>
            <column name="esercizio_contratto" remarks="Esercizio del Contratto." type="SMALLINT"/>
            <column name="stato_contratto" remarks="Stato del Contratto" type="CHAR(1)"/>
            <column name="pg_contratto" remarks="Progressivo del Contratto" type="BIGINT"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="atto_bollo_pkey" tableName="atto_bollo"/>

        <addForeignKeyConstraint baseColumnNames="id_tipo_atto_bollo" baseTableName="atto_bollo" constraintName="fk_atto_bollo01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tipo_atto_bollo"/>

        <addForeignKeyConstraint baseColumnNames="esercizio_contratto,stato_contratto,pg_contratto" baseTableName="atto_bollo" constraintName="fk_atto_bollo02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,stato,pg_contratto" referencedTableName="contratto"/>

        <createIndex indexName="FX_ATTO_BOLLO01" tableName="atto_bollo">
            <column name="id_tipo_atto_bollo"/>
        </createIndex>

        <createIndex indexName="FX_ATTO_BOLLO02" tableName="atto_bollo">
            <column name="ESERCIZIO_CONTRATTO"/>
            <column name="STATO_CONTRATTO"/>
            <column name="PG_CONTRATTO"/>
        </createIndex>
    </changeSet>

    <changeSet author="raffaele.pagano" id="update-table-voce-iva">
        <update tableName="voce_iva">
            <column name="ti_bollo" value='S' type="CHAR(1)"/>
            <where>cd_voce_iva IN ('F3E','F3I','F4I','F4E','F5I', 'F5E', 'F4', 'F5', 'F6', 'F8', 'EB', 'N2', 'N3', 'N4', 'ES')</where>
        </update>

        <update tableName="voce_iva">
            <column name="ti_bollo" value='D' type="CHAR(1)"/>
            <where>cd_voce_iva IN ('N1', 'N6')</where>
        </update>
    </changeSet>

    <changeSet author="raffaele.pagano" runOnChange="true" id="create-view-v-cons-atto-bollo">
        <sqlFile dbms="oracle" path="../expsigladb/View/V_CONS_ATTO_BOLLO.sql" relativeToChangelogFile="true" splitStatements="true" stripComments="false"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="modifiche-variazioni-personale-parametri-ente">
        <addColumn tableName="parametri_ente">
            <column name="fl_variazioni_trasferimento" type="CHAR(1)" defaultValue="N" remarks="Attivazione Gestione Variazioni per trasferimento risorse del personale - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="modifiche-variazioni-personale-tipo-variazione">
        <addColumn tableName="tipo_variazione">
            <column name="fl_variazione_trasferimento" type="CHAR(1)" defaultValue="N" remarks="Variazioni che consente anche trasferimento risorse del personale - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="modifiche-variazioni-personale-pdg-variazione">
        <addColumn tableName="pdg_variazione">
            <column name="ti_motivazione_variazione" remarks="Motivazione per cui viene effettuata la variazione di trasferimento per il personale - Dominio: BAN = Bando; PRG = Proroga; ALT = Altre Spese." type="char(3)"/>
            <column name="id_matricola" type="varchar(10)" remarks="Matricola per cui viene effettuata la variazione."/>
            <column name="id_bando" type="varchar(10)" remarks="Identificativo del bando per cui viene effettuata la variazione."/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="modifiche-variazioni-personale-var-stanz-res">
        <addColumn tableName="var_stanz_res">
            <column name="ti_motivazione_variazione" remarks="Motivazione per cui viene effettuata la variazione di trasferimento per il personale - Dominio: BAN = Bando; PRG = Proroga; ALT = Altre Spese." type="char(3)"/>
            <column name="id_matricola" type="varchar(10)" remarks="Matricola per cui viene effettuata la variazione."/>
            <column name="id_bando" type="varchar(10)" remarks="Identificativo del bando per cui viene effettuata la variazione."/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="accessi_gestione_bollo">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOM"/>
            <column name="ti_accesso" type="CHAR(1)" value=""/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Atto Soggetto a Bollo"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOV"/>
            <column name="ti_accesso" type="CHAR(1)" value=""/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Atto Soggetto a Bollo"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
            <column name="ti_accesso" type="CHAR(1)" value=""/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Atto Soggetto a Bollo"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOV"/>
            <column name="ti_accesso" type="CHAR(1)" value=""/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Atto Soggetto a Bollo"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOCONSATTO"/>
            <column name="ti_accesso" type="CHAR(1)" value=""/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Consultazione Atti Soggetti a Bollo"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOCONSATTO"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsAttoBolloBP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Bollo Virtuale"/>
            <column name="pg_ordinamento" type="BIGINT" value="145"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="BOLLO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG"/>
            <column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOATTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAttoBolloBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.C"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="consultazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOCONSATTO"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsAttoBolloBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="30"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="C"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="tabelle di riferimento"/>
            <column name="pg_ordinamento" type="BIGINT" value="40"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TABRIF"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Tipo Atto"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="5"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPOATT"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="6"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGBOLLOTIPOATTOV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDConfigTipoAttoBolloBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="6"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.BOLLO.TABRIF.TIPOATT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="create-table-tipo-documento-generico">
        <createTable remarks="Tabella contenente le tipologie dei documenti generici." tableName="tipo_documento_generico">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="codice" remarks="Codice identificativo del tipo documento generico." type="VARCHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="tipo_documento" remarks="Tipo Documento (A=Attivo, P=Passivo)" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione del tipo documento generico." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="soggetto_bollo" remarks="Soggetto a Bollo (Y=Sì, N=No)" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="tipo_documento_generico_pkey" tableName="tipo_documento_generico"/>

        <addColumn tableName="documento_generico">
            <column name="id_tipo_documento_generico" type="INT" remarks="ID Tipo documento Generico"/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="id_tipo_documento_generico" baseTableName="documento_generico" constraintName="fk_documento_generico06" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tipo_documento_generico"/>

        <createIndex indexName="FX_DOCUMENTO_GENERICO06" tableName="documento_generico">
            <column name="id_tipo_documento_generico"/>
        </createIndex>
    </changeSet>

    <changeSet id="drop-table-excel_blob" author="marco.spasiano">
        <dropTable tableName="excel_blob"></dropTable>
    </changeSet>

    <changeSet id="drop-table-doc_firma_digitale" author="marco.spasiano">
        <dropTable tableName="doc_firma_digitale"></dropTable>
    </changeSet>

    <changeSet author="marco.spasiano" id="accessi_gestione_preferiti">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="SERVPREFERITIM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione dei Preferiti"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="SERVPREFERITIM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAggiungiPreferitiBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.SERV.PREFERITI"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Gestione Preferiti"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="SERVPREFERITIM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDAggiungiPreferitiBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="15"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="2"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="PREFERITI"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.SERV"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="configurazione_cnr-add-configurazione-iva-detra">
        <insert tableName="configurazione_cnr" dbms="oracle">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FATTURA_PASSIVA"/>
            <column name="cd_chiave_secondaria" type="STRING" value="LIMITE_REG_TARDIVA"/>
            <column name="dt01" type="${date.type}" valueDate="${lastday}"/>
            <column name="dt02" type="${date.type}" valueDate="to_Date('2004'||TO_CHAR(${liquibase.bootstrap.esercizio}+1),'ddmmyyyy')"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr" dbms="postgresql">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FATTURA_PASSIVA"/>
            <column name="cd_chiave_secondaria" type="STRING" value="LIMITE_REG_TARDIVA"/>
            <column name="dt01" type="${date.type}" valueDate="${lastday}"/>
            <column name="dt02" type="${date.type}" valueDate="to_timestamp(to_char(${liquibase.bootstrap.esercizio}+1,'9999')||'-04-20','YYYY-mm-DD')"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="modifiche-detraibilita-iva-add-column">
        <addColumn tableName="tipo_sezionale">
            <column name="fl_reg_tardiva" type="CHAR(1)" defaultValue="N" remarks="Tipo sezionale su cui registrare le fatture ancora detraibili ma tardive - Dominio: Y = Yes; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="modifiche-detraibilita-iva-insert">
        <insert tableName="tipo_sezionale">
            <column name="cd_tipo_sezionale" type="VARCHAR(10)" value="a/comrt"/>
            <column name="ds_tipo_sezionale" type="VARCHAR(50)" value="REGISTRO IVA ORDINARIO ACQUISTI Reg.Tardiva"/>
            <column name="ti_acquisti_vendite" type="CHAR(1)" value="A"/>
            <column name="ti_istituz_commerc" type="CHAR(1)" value="C"/>
            <column name="cd_attivita_commerciale"  type="VARCHAR(10)" value="1"/>
            <column name="fl_ordinario" type="CHAR(1)" value="Y"/>
            <column name="fl_san_marino_con_iva" type="CHAR(1)" value="Y"/>
            <column name="fl_san_marino_senza_iva" type="CHAR(1)" value="Y"/>
            <column name="fl_intra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_extra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_autofattura" type="CHAR(1)" value="N"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
            <column name="ti_bene_servizio" type="CHAR(1)" value="*"/>
            <column name="fl_servizi_non_residenti"  type="CHAR(1)" value="N"/>
            <column name="ordina" type="BIGINT" value="4"/>
            <column name="fl_split_payment"  type="CHAR(1)" value="N"/>
            <column name="fl_reg_tardiva" type="CHAR(1)" value="Y"/>
        </insert>
        <insert tableName="tipo_sezionale">
            <column name="cd_tipo_sezionale" type="VARCHAR(10)" value="v/cautrt"/>
            <column name="ds_tipo_sezionale" type="VARCHAR(50)" value="REGISTRO IVA VENDITE DELLE AUTOFATTURE Reg.Tardiva"/>
            <column name="ti_acquisti_vendite" type="CHAR(1)" value="V"/>
            <column name="ti_istituz_commerc" type="CHAR(1)" value="C"/>
            <column name="cd_attivita_commerciale"  type="VARCHAR(10)" value="1"/>
            <column name="fl_ordinario" type="CHAR(1)" value="N"/>
            <column name="fl_san_marino_con_iva" type="CHAR(1)" value="N"/>
            <column name="fl_san_marino_senza_iva" type="CHAR(1)" value="Y"/>
            <column name="fl_intra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_extra_ue" type="CHAR(1)" value="Y"/>
            <column name="fl_autofattura" type="CHAR(1)" value="Y"/>
            <column name="utcr" type="VARCHAR(20)" value="SIGLA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SIGLA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
            <column name="ti_bene_servizio" type="CHAR(1)" value="*"/>
            <column name="fl_servizi_non_residenti"  type="CHAR(1)" value="N"/>
            <column name="ordina" type="BIGINT" value="3"/>
            <column name="fl_split_payment"  type="CHAR(1)" value="N"/>
            <column name="fl_reg_tardiva" type="CHAR(1)" value="Y"/>
        </insert>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="configurazione_cnr-add-configurazione-split-prof">
        <insert tableName="configurazione_cnr" dbms="oracle">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="SPLIT_PAYMENT"/>
            <column name="cd_chiave_secondaria" type="STRING" value="PASSIVA_PROF"/>
            <column name="dt01" type="${date.type}" valueDate="to_Date('01012017','ddmmyyyy')"/>
            <column name="dt02" type="${date.type}" valueDate="to_Date('13072018','ddmmyyyy')"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr" dbms="postgresql">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="SPLIT_PAYMENT"/>
            <column name="cd_chiave_secondaria" type="STRING" value="PASSIVA_PROF"/>
            <column name="dt01" type="${date.type}" valueDate="timestamp '2017-01-01'"/>
            <column name="dt02" type="${date.type}" valueDate="timestamp '2018-07-13'"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="addColumn_telefono_fatt-elettronica">
        <addColumn tableName="TELEFONO">
            <column name="FATT_ELETTRONICA" type="CHAR(1)" defaultValue="N" remarks="Riferimento per fatturazione elettronica.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="addColumn_terzo_codice-destinatario-fatt">
        <addColumn tableName="TERZO">
            <column name="CODICE_DESTINATARIO_FATT" type="VARCHAR(7)" remarks="Codice destinatario fattura (solo per privati non persone fisiche)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_elettr-privati">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="CODICE_DESTINATARIO_FATT" type="VARCHAR(7)" remarks="Codice destinatario fattura (solo per privati non persone fisiche)">
                <constraints nullable="true"/>
            </column>
            <column name="MAIL_FATTURA_ELETTRONICA" type="VARCHAR(100)" remarks="Indirizzo Mail per la fatturazione elettronica (solo per persone fisiche">
                <constraints nullable="true"/>
            </column>
            <column name="PEC_FATTURA_ELETTRONICA" type="VARCHAR(100)" remarks="Indirizzo PEC per la fatturazione elettronica (solo per privati non persone fisiche)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_elettr-privati-2">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="FL_FATTURA_ELETTRONICA" type="VARCHAR(1)" defaultValue="N" remarks="Fattura Elettronica Y=Si N=No">
                <constraints nullable="false"/>
            </column>
        </addColumn>
        <update tableName="FATTURA_ATTIVA">
            <column name="FL_FATTURA_ELETTRONICA" value="Y" type="varchar(1)"/>
            <where>CODICE_UNIVOCO_UFFICIO_IPA IS NOT NULL</where>
        </update>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="addColumn-terzo-sblocco_fatt_elettronica">
        <addColumn tableName="TERZO">
            <column name="FL_SBLOCCO_FATTURA_ELETTRONICA" type="VARCHAR(1)" defaultValue="N" remarks="Permette di creare la Fattura Elettronica anche in assenza di Codice Destinatario e PEC">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="configurazione_cnr-add-data_inizio_fatt_ele_privati">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FATTURAZIONE_ELETTRONICA"/>
            <column name="cd_chiave_secondaria" type="STRING" value="INIZIO_TRA_PRIVATI"/>
            <column name="dt01" type="${date.type}" valueDate="${firstday}"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_dt_ricezione_sdi">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="DT_RICEZIONE_SDI" type="date" remarks="Data Ricezione della fattura da parte di SDI">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="configurazione_cnr_incarichi_mod_curriculum">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="INCARICHI_MODIFICA_ALLEGATI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="INCARICHI_MOD_CURRICULUM"/>
            <column name="val01" type="${date.type}" value="N"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="create-table-tipologia-finanziamento">
        <createTable remarks="Tabella contenente le tipologie di finanziamento." tableName="tipo_finanziamento">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="codice" remarks="Codice identificativo dell tipo di finanziamento dominio (
                'FOE'=FOE,
                'FOE_PRO'=FOE progetti,
                'AUT'=Autofinanziamento,
                'AUT_AREE'=Autofinanziamento AREE,
                'RIM'=Rimborsi da soggetti terzi,
                'COF'=Cofinanziamento,
                'FIN'=Finanziamento,
                'ATT_COM'=Attività Commerciale pura,
                'ATT_COMM_TAR'=Attività commerciale a tariffario
                )" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione della tipologia di finanziamento" type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_piano_eco_fin" remarks="Piano economico-finanziario" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_ass_cat_voci_ind" remarks="Associazione categoria-voci per il personale tempo indeterminato consentita" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_ass_cat_voci_det" remarks="Associazione categoria-voci per il personale tempo determinato consentita" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_ass_cat_voci_altro" remarks="Associazione categoria-voci per altre spese del personale" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_prev_ent_spesa" remarks="Previsione Entrata/Spesa consentita" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_rip_costi_pers" remarks="Ripartizione costi del personale" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_quad_pdgp_econom" remarks="Quadratura pdgp con quota annuale del piano economico" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_contr_val_prog" remarks="Controllo validità del Progetto" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_piano_rend" remarks="Piano delle rendicontazioni" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_var_cons" remarks="Variazioni consentite" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="fl_inc_cons" remarks="Incassi consentiti" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="id" constraintName="tipo_finanziamento_pkey" tableName="tipo_finanziamento"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_elemento_voce_add_piano_economico">
        <addColumn tableName="elemento_voce">
            <column name="cd_unita_piano" type="varchar(30)" remarks="Unità Organizzativa proprietaria della voce piano economico."/>
            <column name="cd_voce_piano" type="varchar(10)" remarks="Codice identificativo voce piano economico."/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="cd_unita_piano,cd_voce_piano" baseTableName="elemento_voce" constraintName="fk_elemento_voce_piaeco" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_unita_organizzativa,cd_voce_piano" referencedTableName="voce_piano_economico_prg"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_linea_attivita_drop_piano_economico">
        <dropForeignKeyConstraint baseTableName="ass_linea_attivita_esercizio" constraintName="fk_ass_linea_attivita_eserc01"/>

        <dropColumn columnName="cd_unita_piano" tableName="ass_linea_attivita_esercizio"/>
        <dropColumn columnName="cd_voce_piano" tableName="ass_linea_attivita_esercizio"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create_table_ass_progetto_piaeco_voce">
        <createTable remarks="Tabella contenente le associazioni tra il piano economico di un progetto e le voci di bilancio." tableName="ass_progetto_piaeco_voce">
            <column name="pg_progetto" remarks="Progressivo del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Unitא Organizzativa proprietaria della voce piano economico." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_voce_piano" remarks="Codice identificativo voce piano economico" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_piano" remarks="Esercizio piano economico. Se =0 indica il progetto complessivo." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_voce" remarks="Esercizio di riferimento" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="ti_appartenenza" remarks="Definisce l'appartenenza (CNR o CdS) delle voci del piano finanziario di riferimento&#10;&#10;Dominio:&#10;C=CNR&#10;D=CDS" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="ti_gestione" remarks="Definisce la sezione (entrata o spesa) delle voci del piano finanziario di riferimento.&#10;&#10;Dominio:&#10;E=Entrate&#10;S=Spese" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_elemento_voce" remarks="Codice dell'elemento voce" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="pg_progetto,cd_unita_organizzativa,cd_voce_piano,esercizio_piano,esercizio_voce,ti_appartenenza,ti_gestione,cd_elemento_voce" constraintName="ass_progetto_piaeco_voce_pkey" tableName="ass_progetto_piaeco_voce"/>

        <addForeignKeyConstraint baseColumnNames="pg_progetto,cd_unita_organizzativa,cd_voce_piano,esercizio_piano" baseTableName="ass_progetto_piaeco_voce" constraintName="fk_ass_progetto_piaeco_voce01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto,cd_unita_organizzativa,cd_voce_piano,esercizio_piano" referencedTableName="progetto_piano_economico"/>

        <addForeignKeyConstraint baseColumnNames="esercizio_voce,ti_appartenenza,ti_gestione,cd_elemento_voce" baseTableName="ass_progetto_piaeco_voce" constraintName="fk_ass_progetto_piaeco_voce02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,ti_appartenenza,ti_gestione,cd_elemento_voce" referencedTableName="elemento_voce"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_other_field_modify_column">
        <dropColumn columnName="fl_piano_economico" tableName="progetto_other_field"/>

        <addColumn tableName="progetto_other_field">
            <column name="id_tipo_finanziamento" type="INT" remarks="Chiave Primaria tipo finanziamento."/>
            <column name="stato" remarks="Stato del progetto" type="CHAR(3)"/>
            <column name="dt_inizio" remarks="Data inizio del progetto." type="${date.type}"/>
            <column name="dt_fine" remarks="Data fine del progetto." type="${date.type}"/>
            <column name="dt_proroga" remarks="Data proroga del progetto." type="${date.type}"/>
            <column name="im_finanziato" remarks="Importo finanziario del progetto" type="numeric(15, 2)"/>
            <column name="im_cofinanziato" remarks="Importo cofinanziario del progetto" type="numeric(15, 2)"/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="id_tipo_finanziamento" baseTableName="progetto_other_field" constraintName="fk_progetto_other_field01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="tipo_finanziamento"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_piano_economico">
        <renameColumn oldColumnName="im_spesa" newColumnName="im_spesa_finanziato" tableName="progetto_piano_economico"/>
        <addColumn tableName="progetto_piano_economico">
            <column name="im_spesa_cofinanziato" remarks="Importo spesa cofinanziario del progetto" type="numeric(15, 2)"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="insert_base_tipo_finanziamento">
        <addDefaultValue tableName="tipo_finanziamento" columnName="dacr" defaultValueDate="${now}"/>
        <addDefaultValue tableName="tipo_finanziamento" columnName="duva" defaultValueDate="${now}"/>

        <loadData commentLineStartsWith="#" encoding="UTF-8" file="bootstrap/csv-upgrade/tipo_finanziamento.csv" quotchar="&quot;" separator="," tableName="tipo_finanziamento"/>

        <dropDefaultValue tableName="tipo_finanziamento" columnName="dacr"/>
        <dropDefaultValue tableName="tipo_finanziamento" columnName="duva"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="accessi_tipo_finanziamento">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Finanziamento"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAV"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione Tipo Finanziamento"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Tipo Finanziamento"/>
            <column name="pg_ordinamento" type="BIGINT" value="146"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPO_FINANZIAMENTO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG"/>
            <column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_voce_piano_economico_prg001">
        <addColumn tableName="voce_piano_economico_prg">
            <column name="tipologia" remarks="Tipologia voce piano economico" type="CHAR(3)"/>
            <column name="fl_link_vocibil_associate" type="CHAR(1)" defaultValue="N" remarks="Voci di Bilancio associate collegate in automatico. - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
            <column name="fl_add_vocibil" type="CHAR(1)" defaultValue="N" remarks="Voci di Bilancio associabili manualmente. - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_progetto_for_other_field">
        <addColumn tableName="progetto_sip">
            <column name="pg_progetto_other_field" remarks="Progressivo del progetto" type="BIGINT"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="pg_progetto_other_field" baseTableName="progetto_sip" constraintName="progetto_sip_fk07" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto" referencedTableName="progetto_other_field"/>
        <addColumn tableName="progetto_sic">
            <column name="pg_progetto_other_field" remarks="Progressivo del progetto" type="BIGINT"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="pg_progetto_other_field" baseTableName="progetto_sic" constraintName="progetto_sic_fk07" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto" referencedTableName="progetto_other_field"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="accessi_ruolo_pdgp">
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPC"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPC"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPH"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPV"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ruolo_accesso">
            <column name="cd_ruolo" type="VARCHAR(20)" value="PDGPV"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGERS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet id="spostamento_voce_menu_finanziamenti" author="marco.spasiano">
        <delete tableName="albero_main">
            <where>cd_nodo in ('0.CFG.TIPO_FINANZIAMENTO', '0.CFG.TIPO_FINANZIAMENTO.M', '0.CFG.TIPO_FINANZIAMENTO.V')</where>
        </delete>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Tipo Finanziamento"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPO_FINANZIAMENTO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF"/>
            <column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOFINANZIAV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTipoFinanziamentoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_FINANZIAMENTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter-table-finanziamento-e-voce-economica">
        <addColumn tableName="tipo_finanziamento">
            <column name="fl_all_prev_fin" remarks="Previsione totale quota finanziata" type="CHAR(1)" />
        </addColumn>
        <update tableName="tipo_finanziamento">
            <column name="fl_all_prev_fin" value='Y' type="CHAR(1)" />
        </update>
        <addNotNullConstraint columnName="fl_all_prev_fin" tableName="tipo_finanziamento" columnDataType="CHAR(1)"/>

        <addColumn tableName="voce_piano_economico_prg">
            <column name="fl_all_prev_fin" remarks="Previsione totale quota finanziata" type="CHAR(1)" />
        </addColumn>
        <update tableName="voce_piano_economico_prg">
            <column name="fl_all_prev_fin" value='Y' type="CHAR(1)"/>
        </update>
        <addNotNullConstraint columnName="fl_all_prev_fin" tableName="voce_piano_economico_prg" columnDataType="CHAR(1)"/>
    </changeSet>

    <changeSet id="voce_menu_tipo_progetto" author="marco.spasiano">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOPROGETTOM"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Tipo Progetto"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOPROGETTOV"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione Tipo Progetto"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOPROGETTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="TipoProgettiRicercaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOPROGETTOV"/>
            <column name="business_process" type="VARCHAR(200)" value="TipoProgettiRicercaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_PROGETTO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Tipo Progetto"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="TIPO_PROGETTO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF"/>
            <column name="url_icona" type="VARCHAR(200)" value="leaf.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_PROGETTO.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOPROGETTOM"/>
            <column name="business_process" type="VARCHAR(200)" value="TipoProgettiRicercaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_PROGETTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_PROGETTO.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGTIPOPROGETTOV"/>
            <column name="business_process" type="VARCHAR(200)" value="TipoProgettiRicercaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.TABRIF.TIPO_PROGETTO"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="configurazione_cnr_esercizio_attivazione_piano_economico">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="PROGETTI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="PIANO_ECONOMICO"/>
            <column name="im01" type="${date.type}" value="${liquibase.bootstrap.esercizio}"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="alter_var_stanz_res_causale">
        <addColumn tableName="var_stanz_res">
            <column name="ds_causale" type="varchar(50)" remarks="Descrizione aggiuntiva per etichettare delle variazioni."/>
        </addColumn>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="alter_pdg_variazione_causale">
        <addColumn tableName="pdg_variazione">
            <column name="ds_causale" type="varchar(50)" remarks="Descrizione aggiuntiva per etichettare delle variazioni."/>
        </addColumn>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="accessi_gionaliera">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="DOCINTCASCORECAGIOM"/>
            <column name="ti_accesso" type="CHAR(1)"  value="" />
            <column name="ds_accesso" type="VARCHAR(200)" value="Carica File Giornaliera"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="DOCINTCASCORECAGIOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CaricaFileGiornalieraBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.DOC.INTCAS.CAFILE.CG"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Carica file giornaliera"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="DOCINTCASCORECAGIOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CaricaFileGiornalieraBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="4"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="CG"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.DOC.INTCAS.CAFILE"/>
            <column name="url_icona" type="VARCHAR(200)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="alter_nome_file">
        <modifyDataType tableName="ext_cassiere00_logs" columnName="nome_file" newDataType="VARCHAR(30)"/>
        <modifyDataType tableName="ext_cassiere00_scarti" columnName="nome_file" newDataType="VARCHAR(30)"/>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="alter_sospeso_giornaliera">
        <addColumn tableName="sospeso">
            <column name="tipo_contabilita" type="varchar(20)"/>
        </addColumn>
        <addColumn tableName="sospeso">
            <column name="destinazione" type="varchar(20)"/>
        </addColumn>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="create-table-flusso-giornale-cassa">
        <createTable remarks="Tabella contenente la testata del flusso della giornaliera." tableName="flusso_giornale_di_cassa">
            <column name="codice_abi_bt"  type="BIGINT"/>
            <column name="esercizio"  type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="identificativo_flusso" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="data_ora_creazione_flusso" type="DATE"/>
            <column name="data_inizio_periodo_rif" type="DATE"/>
            <column name="data_fine_periodo_rif" type="DATE"/>
            <column name="codice_ente" type="VARCHAR(30)"/>
            <column name="descrizione_ente" type="VARCHAR(100)"/>
            <column name="codice_ente_bt" type="VARCHAR(8)"/>
            <column name="riferimento_ente" type="VARCHAR(20)"/>
            <column name="saldo_complessivo_prec" type="numeric(15, 2)"/>
            <column name="totale_complessivo_entrate" type="numeric(15, 2)"/>
            <column name="totale_complessivo_uscite" type="numeric(15, 2)"/>
            <column name="saldo_complessivo_finale" type="numeric(15, 2)"/>
            <column name="fondo_di_cassa" type="numeric(15, 2)"/>
            <column name="totale_reversali_riscosse" type="numeric(15, 2)"/>
            <column name="totale_sospesi_entrata" type="numeric(15, 2)"/>
            <column name="totale_entrate" type="numeric(15, 2)"/>
            <column name="deficit_di_cassa" type="numeric(15, 2)"/>
            <column name="totale_mandati_pagati" type="numeric(15, 2)"/>
            <column name="totale_sospesi_uscita" type="numeric(15, 2)"/>
            <column name="totale_uscite" type="numeric(15, 2)"/>
            <column name="saldo_esercizio" type="numeric(15, 2)"/>
            <column name="saldo_conti_correnti" type="numeric(15, 2)"/>
            <column name="saldo_conti_bi" type="numeric(15, 2)"/>
            <column name="totale_conti" type="numeric(15, 2)"/>
            <column name="vincoli_conti_correnti" type="numeric(15, 2)"/>
            <column name="vincoli_conti_bi" type="numeric(15, 2)"/>
            <column name="totale_vincoli" type="numeric(15, 2)"/>
            <column name="anticipazione_accordata" type="numeric(15, 2)"/>
            <column name="anticipazione_utilizzata" type="numeric(15, 2)"/>
            <column name="disponibilita" type="numeric(15, 2)"/>
            <column name="dacr" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="esercizio,identificativo_flusso" constraintName="px_flusso_giornale_di_cassa" tableName="flusso_giornale_di_cassa"/>

        <createTable remarks="Tabella contenente i conti presenti nel flusso della giornaliera." tableName="informazioni_conto_evidenza">
            <column name="esercizio" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="identificativo_flusso" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="conto_evidenza" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione_conto_evidenza" type="VARCHAR(50)"/>
            <column name="saldo_precedente_conto_evid" type="numeric(15, 2)"/>
            <column name="totale_entrate_conto_evidenza" type="numeric(15, 2)"/>
            <column name="totale_uscite_conto_evidenza" type="numeric(15, 2)"/>
            <column name="saldo_finale_conto_evidenza" type="numeric(15, 2)"/>
            <column name="dacr" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="esercizio,identificativo_flusso,conto_evidenza" constraintName="px_informazioni_conto_evid" tableName="informazioni_conto_evidenza"/>
        <addForeignKeyConstraint baseColumnNames="esercizio,identificativo_flusso" baseTableName="informazioni_conto_evidenza" constraintName="fk_informazioni_conto_evid" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,identificativo_flusso" referencedTableName="flusso_giornale_di_cassa"/>
        <createIndex indexName="fx_informazioni_conto_evid" tableName="informazioni_conto_evidenza">
            <column name="esercizio"/>
            <column name="identificativo_flusso"/>
        </createIndex>

        <createTable remarks="Tabella contenente il dettaglio dei movimenti dei conti presenti nel flusso della giornaliera." tableName="movimento_conto_evidenza">
            <column name="esercizio" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="identificativo_flusso" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="progressivo" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="conto_evidenza" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="stato" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="tipo_movimento" type="VARCHAR(10)"/>
            <column name="tipo_documento" type="VARCHAR(20)"/>
            <column name="tipo_operazione" type="VARCHAR(20)"/>
            <column name="numero_documento" type="BIGINT"/>
            <column name="ti_pagamento_funz_delegato" type="VARCHAR(20)"/>
            <column name="num_pag_funz_delegato" type="VARCHAR(10)"/>
            <column name="progressivo_documento" type="BIGINT"/>
            <column name="importo" type="numeric(15, 2)"/>
            <column name="importo_ritenute" type="numeric(15, 2)"/>
            <column name="numero_bolletta_quietanza" type="VARCHAR(10)"/>
            <column name="numero_bolletta_quietanza_s" type="VARCHAR(10)"/>
            <column name="data_movimento" type="DATE"/>
            <column name="data_valuta_ente" type="DATE"/>
            <column name="tipo_esecuzione" type="VARCHAR(20)"/>
            <column name="coordinate" type="VARCHAR(30)"/>
            <column name="codice_rif_operazione" type="VARCHAR(20)"/>
            <column name="codice_rif_interno" type="VARCHAR(20)"/>
            <column name="tipo_contabilita" type="VARCHAR(20)"/>
            <column name="destinazione" type="VARCHAR(20)"/>
            <column name="assoggettamento_bollo" type="VARCHAR(30)"/>
            <column name="importo_bollo" type="numeric(15, 2)"/>
            <column name="assoggettamento_spese" type="VARCHAR(30)"/>
            <column name="importo_spese" type="numeric(15, 2)"/>
            <column name="assoggettamento_commissioni" type="VARCHAR(30)"/>
            <column name="importo_commissioni" type="numeric(15, 2)"/>
            <column name="anagrafica_cliente" type="VARCHAR(50)"/>
            <column name="indirizzo_cliente" type="VARCHAR(50)"/>
            <column name="cap_cliente" type="VARCHAR(16)"/>
            <column name="localita_cliente" type="VARCHAR(50)"/>
            <column name="provincia_cliente" type="VARCHAR(20)"/>
            <column name="stato_cliente" type="VARCHAR(2)"/>
            <column name="partita_iva_cliente" type="VARCHAR(35)"/>
            <column name="codice_fiscale_cliente" type="VARCHAR(35)"/>
            <column name="anagrafica_delegato" type="VARCHAR(50)"/>
            <column name="indirizzo_delegato" type="VARCHAR(50)"/>
            <column name="cap_delegato" type="VARCHAR(16)"/>
            <column name="localita_delegato" type="VARCHAR(50)"/>
            <column name="provincia_delegato" type="VARCHAR(20)"/>
            <column name="stato_delegato" type="VARCHAR(2)"/>
            <column name="codice_fiscale_delegato" type="VARCHAR(35)"/>
            <column name="anagrafica_creditore_eff" type="VARCHAR(50)"/>
            <column name="indirizzo_creditore_eff" type="VARCHAR(50)"/>
            <column name="cap_creditore_eff" type="VARCHAR(16)"/>
            <column name="localita_creditore_eff" type="VARCHAR(50)"/>
            <column name="provincia_creditore_eff" type="VARCHAR(20)"/>
            <column name="stato_creditore_eff" type="VARCHAR(2)"/>
            <column name="partita_iva_creditore_eff" type="VARCHAR(35)"/>
            <column name="codice_fiscale_creditore_eff" type="VARCHAR(35)"/>
            <column name="causale" type="VARCHAR(200)"/>
            <column name="numero_sospeso" type="BIGINT"/>
            <column name="dacr" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="esercizio,identificativo_flusso,conto_evidenza,stato,progressivo" constraintName="px_movimento_conto_evidenza" tableName="movimento_conto_evidenza"/>
        <addForeignKeyConstraint baseColumnNames="esercizio,identificativo_flusso,conto_evidenza" baseTableName="movimento_conto_evidenza" constraintName="fk_movimento_conto_evidenza" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,identificativo_flusso,conto_evidenza" referencedTableName="informazioni_conto_evidenza"/>
        <createIndex indexName="fx_movimento_conto_evidenza" tableName="movimento_conto_evidenza">
            <column name="esercizio"/>
            <column name="identificativo_flusso"/>
            <column name="conto_evidenza"/>
        </createIndex>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="alter_movimento_c_evi">
        <modifyDataType tableName="movimento_conto_evidenza" columnName="tipo_esecuzione" newDataType="VARCHAR(100)"/>
        <modifyDataType tableName="movimento_conto_evidenza" columnName="assoggettamento_bollo" newDataType="VARCHAR(50)"/>
        <modifyDataType tableName="movimento_conto_evidenza" columnName="assoggettamento_spese" newDataType="VARCHAR(50)"/>
        <modifyDataType tableName="movimento_conto_evidenza" columnName="assoggettamento_commissioni" newDataType="VARCHAR(50)"/>
    </changeSet>

    <changeSet author="rosangela.pucciarelli" id="alter_movimento_c_evi_iban">
        <modifyDataType tableName="movimento_conto_evidenza" columnName="coordinate" newDataType="VARCHAR(50)"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="configurazione_cnr-add-parametri-siopeplus">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FLUSSO_ORDINATIVI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CODICE_A2A"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FLUSSO_ORDINATIVI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CODICE_ENTE"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FLUSSO_ORDINATIVI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CODICE_ENTE_BT"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FLUSSO_ORDINATIVI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CODICE_TRAMITE_BT"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FLUSSO_ORDINATIVI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CODICE_ISTAT_ENTE"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="FLUSSO_ORDINATIVI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="ATTIVO_SIOPEPLUS"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_distinta_cassiere_add_prog_flusso">
        <addColumn tableName="distinta_cassiere">
            <column name="prog_flusso" type="number(30)" remarks="Progressivo flusso siope+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_distinta_cassiere_add_identificativo_flusso_bt">
        <addColumn tableName="distinta_cassiere">
            <column name="identificativo_flusso_bt" type="varchar2(30)" remarks="Identificativo flusso BT siope+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_distinta_cassiere_add_stato">
        <addColumn tableName="distinta_cassiere">
            <column name="stato" type="varchar2(3)" remarks="Stato della distinta siope+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_mandato_add_esito_errore">
        <addColumn tableName="mandato">
            <column name="esito_operazione" type="varchar2(30)" remarks="Esito operazione siope+"/>
            <column name="dt_ora_esito_operazione" type="${date.type}" remarks="Data Esito operazione siope+"/>
            <column name="errore_siope_plus" type="varchar2(2000)" remarks="Errore operazione siope+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_reversale_add_esito_errore">
        <addColumn tableName="reversale">
            <column name="esito_operazione" type="varchar2(30)" remarks="Esito operazione siope+"/>
            <column name="dt_ora_esito_operazione" type="${date.type}" remarks="Data Esito operazione siope+"/>
            <column name="errore_siope_plus" type="varchar2(2000)" remarks="Errore operazione siope+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_rif_modalita_pagamento_add_tipo_pagamento_siope_plus">
        <addColumn tableName="rif_modalita_pagamento">
            <column name="tipo_pagamento_siope" type="varchar2(250)" remarks="Tipo pagamento siope+ Può assumere i valori:
CASSA
SEPA CREDIT TRANSFER
ASSEGNO BANCARIO E POSTALE
ASSEGNO CIRCOLARE
ACCREDITO CONTO CORRENTE POSTALE
ACCREDITO TESORERIA PROVINCIALE STATO PER TAB A
ACCREDITO TESORERIA PROVINCIALE STATO PER TAB B
F24EP
VAGLIA POSTALE
VAGLIA TESORO
REGOLARIZZAZIONE
REGOLARIZZAZIONE ACCREDITO TESORERIA PROVINCIALE STATO PER TAB A
REGOLARIZZAZIONE ACCREDITO TESORERIA PROVINCIALE STATO PER TAB B
ADDEBITO PREAUTORIZZATO DISPOSIZIONE DOCUMENTO ESTERNO
COMPENSAZIONE
BONIFICO ESTERO EURO"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="create-table-siope-plus-risultato">
        <createTable remarks="Tabella contenente i link dei messaggi SIOPE+" tableName="siope_plus_risultato">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="esito" remarks="Codice identificativo dell''esito." type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="location" remarks="URL del messaggio" type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="siope_plus_risultato_pkey" tableName="siope_plus_risultato"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_banca_add_tipo_postalizzazione">
        <addColumn tableName="banca">
            <column name="tipo_postalizzazione" type="varchar2(250)" remarks="Tipo Postalizzazione siope+ Può assumere i valori:
COME DA CONVENZIONE
CONSEGNA ALL'ENTE
POSTA PRIORITARIA
RACCOMANDATA
RACCOMANDATA A.R.
ASSICURATA"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_manrev_add_tipo_debito_siope">
        <addColumn tableName="mandato">
            <column name="tipo_debito_siope" type="char(1)" remarks="Tipo Debito siope+ Può assumere i valori:
C: COMMERCIALE
N: NON COMMERCIALE
I: IVA"/>
        </addColumn>
        <addColumn tableName="reversale">
            <column name="tipo_debito_siope" type="char(1)" remarks="Tipo Debito siope+ Può assumere i valori:
C: COMMERCIALE
N: NON COMMERCIALE
I: IVA"/>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_tipo_trattamento_add_tipo_debito_siope">
        <addColumn tableName="tipo_trattamento">
            <column name="tipo_debito_siope" type="varchar2(1)" remarks="Tipo Debito per Siope+. I valori possibili sono: C = Commerciale o N = Non Commerciale"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_siope_plus_risultato_add_risultato">
        <addColumn tableName="siope_plus_risultato">
            <column name="prog_flusso" type="number(30)" remarks="Progressivo flusso siope+"/>
            <column name="prog_esito_applicativo" type="number(30)" remarks="Progressivo esito applicativo siope+"/>
            <column name="data_produzione" type="${date.type}" remarks="Data Produzione"/>
            <column name="data_upload" type="${date.type}" remarks="Data Upload"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_fattura_passiva_add_cig">
        <addColumn tableName="fattura_passiva">
            <column name="cd_cig" type="VARCHAR(10)" remarks="Codice cig"/>
            <column name="motivo_assenza_cig" type="VARCHAR(250)" remarks="Motivo assenza CIG  Può assumere i valori:
ACCORDO_AMM_AGGIUDICATRICI
ACQUISTO_LOCAZIONE
AFFIDAMENTI_IN_HOUSE
AMMINISTRAZIONE DIRETTA
APPALTI_ENERGIA_ACQUA
ARBITRATO
ATTIVITA_CONCORRENZA
CONCESSIONI_PAESI_TERZI
CONTRATTI_ASSOCIAZIONE
CONTRATTI_AUTORITA_GIUDIZIARIA
CONTRATTI_DIFESA
CONTRATTI_ESTERO
CONTRATTI_LAVORO
DIRITTO_ESCLUSIVO
EROGAZIONI_LIBERALITA
IMPRESA_COLLEGATA
INCARICHI_COLLABORAZIONE
JOINT_VENTURE
PRESTAZIONI
RIASSICURAZIONE
RISARCIMENTI_INDENNIZZI
SERVIZI_BANCHE_CENTRALI_EFSF
SERVIZI_CAMPAGNE_POLITICHE
SPESE_ECONOMALI
SPONSORIZZAZIONE_PURA
TRASFERIMENTO_FONDI
TRASPORTO_AEREO"/>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="add_fk_fattura_passiva_cig">
        <addForeignKeyConstraint baseColumnNames="cd_cig" baseTableName="fattura_passiva" constraintName="fk_fattura_passiva14" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_cig" referencedTableName="cig"/>
        <createIndex indexName="FX_FATTURA_PASSIVA14" tableName="FATTURA_PASSIVA">
            <column name="CD_CIG"/>
        </createIndex>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="add_fk_fattura_passiva_cig">
        <addForeignKeyConstraint baseColumnNames="cd_cig" baseTableName="fattura_passiva" constraintName="fk_fattura_passiva14" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_cig" referencedTableName="cig"/>
        <createIndex indexName="FX_FATTURA_PASSIVA14" tableName="FATTURA_PASSIVA">
            <column name="CD_CIG"/>
        </createIndex>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="drop_column_cig_fattura_passiva">
        <dropColumn columnName="cd_cig"
                    tableName="fattura_passiva"/>
        <dropColumn columnName="motivo_assenza_cig"
                    tableName="fattura_passiva"/>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_fattura_passiva_riga_add_cig">
        <addColumn tableName="fattura_passiva_riga">
            <column name="cd_cig" type="VARCHAR(10)" remarks="Codice cig"/>
            <column name="motivo_assenza_cig" type="VARCHAR(250)" remarks="Motivo assenza CIG  Può assumere i valori:
ACCORDO_AMM_AGGIUDICATRICI
ACQUISTO_LOCAZIONE
AFFIDAMENTI_IN_HOUSE
AMMINISTRAZIONE DIRETTA
APPALTI_ENERGIA_ACQUA
ARBITRATO
ATTIVITA_CONCORRENZA
CONCESSIONI_PAESI_TERZI
CONTRATTI_ASSOCIAZIONE
CONTRATTI_AUTORITA_GIUDIZIARIA
CONTRATTI_DIFESA
CONTRATTI_ESTERO
CONTRATTI_LAVORO
DIRITTO_ESCLUSIVO
EROGAZIONI_LIBERALITA
IMPRESA_COLLEGATA
INCARICHI_COLLABORAZIONE
JOINT_VENTURE
PRESTAZIONI
RIASSICURAZIONE
RISARCIMENTI_INDENNIZZI
SERVIZI_BANCHE_CENTRALI_EFSF
SERVIZI_CAMPAGNE_POLITICHE
SPESE_ECONOMALI
SPONSORIZZAZIONE_PURA
TRASFERIMENTO_FONDI
TRASPORTO_AEREO"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="cd_cig" baseTableName="fattura_passiva_riga" constraintName="fk_fattura_passiva_riga11" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_cig" referencedTableName="cig"/>
        <createIndex indexName="FX_FATTURA_PASSIVA_RIGA11" tableName="FATTURA_PASSIVA_RIGA">
            <column name="CD_CIG"/>
        </createIndex>
    </changeSet>

    <changeSet author="raffaele.pagano" id="configurazione_cnr_piano_economico">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="PROGETTI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="NATURA_REIMPIEGO"/>
            <column name="val01" type="${date.type}" value="6"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="ELEMENTO_VOCE_SPECIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="TEMPO_IND_SU_PROGETTI_FINANZIATI"/>
            <column name="val01" type="${date.type}" value="11048"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="configurazione_cnr_abi_banca_italia">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="CONTO_CORRENTE_SPECIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="BANCA_ITALIA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_banca_add_tipo_pagamento_siope_plus">
        <addColumn tableName="banca">
            <column name="tipo_pagamento_siope" type="varchar2(250)" remarks="Tipo pagamento siope+ Può assumere i valori:
CASSA
SEPA CREDIT TRANSFER
ASSEGNO BANCARIO E POSTALE
ASSEGNO CIRCOLARE
ACCREDITO CONTO CORRENTE POSTALE
ACCREDITO TESORERIA PROVINCIALE STATO PER TAB A
ACCREDITO TESORERIA PROVINCIALE STATO PER TAB B
F24EP
VAGLIA POSTALE
VAGLIA TESORO
REGOLARIZZAZIONE
REGOLARIZZAZIONE ACCREDITO TESORERIA PROVINCIALE STATO PER TAB A
REGOLARIZZAZIONE ACCREDITO TESORERIA PROVINCIALE STATO PER TAB B
ADDEBITO PREAUTORIZZATO DISPOSIZIONE DOCUMENTO ESTERNO
COMPENSAZIONE
BONIFICO ESTERO EURO"/>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_compenso_add_cig">
        <addColumn tableName="compenso">
            <column name="cd_cig" type="VARCHAR(10)" remarks="Codice cig"/>
            <column name="motivo_assenza_cig" type="VARCHAR(250)" remarks="Motivo assenza CIG  Può assumere i valori:
ACCORDO_AMM_AGGIUDICATRICI
ACQUISTO_LOCAZIONE
AFFIDAMENTI_IN_HOUSE
AMMINISTRAZIONE DIRETTA
APPALTI_ENERGIA_ACQUA
ARBITRATO
ATTIVITA_CONCORRENZA
CONCESSIONI_PAESI_TERZI
CONTRATTI_ASSOCIAZIONE
CONTRATTI_AUTORITA_GIUDIZIARIA
CONTRATTI_DIFESA
CONTRATTI_ESTERO
CONTRATTI_LAVORO
DIRITTO_ESCLUSIVO
EROGAZIONI_LIBERALITA
IMPRESA_COLLEGATA
INCARICHI_COLLABORAZIONE
JOINT_VENTURE
PRESTAZIONI
RIASSICURAZIONE
RISARCIMENTI_INDENNIZZI
SERVIZI_BANCHE_CENTRALI_EFSF
SERVIZI_CAMPAGNE_POLITICHE
SPESE_ECONOMALI
SPONSORIZZAZIONE_PURA
TRASFERIMENTO_FONDI
TRASPORTO_AEREO"/>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="add_fk_compenso_cig">
        <addForeignKeyConstraint baseColumnNames="cd_cig" baseTableName="compenso" constraintName="fk_compenso34" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_cig" referencedTableName="cig"/>
        <createIndex indexName="FX_COMPENSO34" tableName="COMPENSO">
            <column name="CD_CIG"/>
        </createIndex>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter-table-movimento-conto-evidenza-anagrafica-cliente">
        <update tableName="movimento_conto_evidenza">
            <column name="anagrafica_cliente" type="VARCHAR(250)"/>
        </update>
    </changeSet>

    <changeSet id="update-configurazione-cnr-user-giornaledicassa" author="marco.spasiano">
        <update tableName="configurazione_cnr">
            <column name="VAL02" value='CASTELLET' type="VARCHAR(100)"/>
            <where>CD_CHIAVE_PRIMARIA = 'FLUSSO_ORDINATIVI' AND CD_CHIAVE_SECONDARIA = 'ATTIVO_SIOPEPLUS'</where>
        </update>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_id_matricola">
        <modifyDataType tableName="var_stanz_res" columnName="id_matricola" newDataType="numeric"/>
        <modifyDataType tableName="pdg_variazione" columnName="id_matricola" newDataType="numeric"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="accessi_amminstra_progetti">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGAMM"/>
            <column name="ti_accesso" type="CHAR(1)"  value="" />
            <column name="ds_accesso" type="VARCHAR(200)" value="Amministra Progetti Area Progettuale"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGAMM"/>
            <column name="business_process" type="VARCHAR(200)" value="AmministraTestataProgettiRicercaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.LIV2.A"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Amministra"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGAMM"/>
            <column name="business_process" type="VARCHAR(200)" value="AmministraTestataProgettiRicercaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="3"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="A"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.LIV2"/>
            <column name="url_icona" type="VARCHAR(200)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_id_bando">
        <modifyDataType tableName="var_stanz_res" columnName="id_bando" newDataType="varchar(30)"/>
        <modifyDataType tableName="pdg_variazione" columnName="id_bando" newDataType="varchar(30)"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="accessi_documenti_non_acquisiti">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CONSDOCAMMMANNONAC"/>
            <column name="ti_accesso" type="CHAR(1)"  value="D" />
            <column name="ds_accesso" type="VARCHAR(200)" value="Mandati non acquisiti"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CONSDOCAMMMANNONAC"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsMandatiNonAcquisitiBP"/>
            <column name="ti_funzione" type="CHAR(1)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.DOC.CON.MAN.MANNONA"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Mandati non acquisiti"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CONSDOCAMMMANNONAC"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsMandatiNonAcquisitiBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="100"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="A"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.DOC.CON.MAN"/>
            <column name="url_icona" type="VARCHAR(200)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CONSDOCAMMREVNONAC"/>
            <column name="ti_accesso" type="CHAR(1)"  value="D" />
            <column name="ds_accesso" type="VARCHAR(200)" value="Reversali non acquisite"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CONSDOCAMMREVNONAC"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsReversaliNonAcquisitiBP"/>
            <column name="ti_funzione" type="CHAR(1)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.DOC.CON.REV.REVNONA"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Reversali non acquisite"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CONSDOCAMMREVNONAC"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsReversaliNonAcquisitiBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="100"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="A"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.DOC.CON.REV"/>
            <column name="url_icona" type="VARCHAR(200)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-progetto-rimodulazione">
        <createTable remarks="Tabella contenente le rimodulazioni dei progetti" tableName="progetto_rimodulazione">
            <column name="pg_progetto" remarks="Progressivo del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="pg_rimodulazione" remarks="Progressivo rimodulazione del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="pg_gen_rimodulazione" remarks="Progressivo generale rimodulazione del progetto di ricerca" type="BIGINT"/>
            <column name="stato" remarks="Stato della rimodulazione. P: Provvisorio - D: Definitivo - A: Approvato" type="VARCHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="dt_inizio_old" remarks="Data inizio precedente alla rimodulazione del progetto." type="${date.type}"/>
            <column name="dt_fine_old" remarks="Data fine precedente alla rimodulazione del progetto." type="${date.type}"/>
            <column name="dt_proroga_old" remarks="Data proroga precedente alla rimodulazione del progetto." type="${date.type}"/>
            <column name="dt_inizio" remarks="Data inizio rimodulato del progetto." type="${date.type}"/>
            <column name="dt_fine" remarks="Data fine rimodulato del progetto." type="${date.type}"/>
            <column name="dt_proroga" remarks="Data proroga rimodulato del progetto." type="${date.type}"/>
            <column name="im_var_finanziato" remarks="Importo Variazione Spesa Finanziato rimodulato del progetto" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_var_cofinanziato" remarks="Importo Variazione Spesa Cofinanziato rimodulato del progetto" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="pg_progetto,pg_rimodulazione" constraintName="progetto_rimodulazione_pkey" tableName="progetto_rimodulazione"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-progetto-rimodulazione-ppe">
        <createTable remarks="Tabella contenente la rimodulazione del piano economico del progetto." tableName="progetto_rimodulazione_ppe">
            <column name="pg_progetto" remarks="Progressivo del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="pg_rimodulazione" remarks="Progressivo rimodulazione del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Unita' Organizzativa proprietaria della voce piano economico." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_voce_piano" remarks="Codice identificativo voce piano economico" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_piano" remarks="Esercizio piano economico. Se =0 indica il progetto complessivo." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="im_var_entrata" remarks="Importo Variazione Entrata associato al ProgettoVoce Piano Economico" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_var_spesa_finanziato" remarks="Importo Variazione Spesa Finanziato rimodulato associato al ProgettoVoce Piano Economico" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_var_spesa_cofinanziato" remarks="Importo Variazione Spesa Cofinanziato rimodulato associato al ProgettoVoce Piano Economico" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_stoass_spesa_finanziato" remarks="Importo Storicizzato dell'Assestato Spesa Finanziato." type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_stoass_spesa_cofinanziato" remarks="Importo Storicizzato dell'Assestato Spesa Cofinanziato." type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" remarks="Data di creazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" remarks="Utenza di creazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" remarks="Data di ultima variazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" remarks="Utenza di ultima variazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" remarks="Progressivo di versione del record: viene incrementato di 1 ad ogni variazione" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="pg_progetto, pg_rimodulazione, cd_unita_organizzativa, cd_voce_piano, esercizio_piano" constraintName="progetto_rimodulaz_ppe_pkey" tableName="progetto_rimodulazione_ppe"/>

        <addForeignKeyConstraint baseColumnNames="pg_progetto, pg_rimodulazione" baseTableName="progetto_rimodulazione_ppe" constraintName="fk_progetto_rimodulaz_ppe00" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto, pg_rimodulazione" referencedTableName="progetto_rimodulazione"/>

        <addForeignKeyConstraint baseColumnNames="cd_unita_organizzativa,cd_voce_piano" baseTableName="progetto_rimodulazione_ppe" constraintName="fk_progetto_rimodulaz_ppe01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_unita_organizzativa,cd_voce_piano" referencedTableName="voce_piano_economico_prg"/>

        <createIndex indexName="FX_PROGETTO_RIMODULAZ_PPE00" tableName="PROGETTO_RIMODULAZIONE_PPE">
            <column name="PG_PROGETTO"/>
            <column name="PG_RIMODULAZIONE"/>
        </createIndex>

        <createIndex indexName="FX_PROGETTO_RIMODULAZ_PPE01" tableName="PROGETTO_RIMODULAZIONE_PPE">
            <column name="CD_UNITA_ORGANIZZATIVA"/>
            <column name="CD_VOCE_PIANO"/>
        </createIndex>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-progetto-rimodulazione-voce">
        <createTable remarks="Tabella contenente la rimodulazione delle voci di bilancio associate al piano economico del progetto." tableName="progetto_rimodulazione_voce">
            <column name="pg_progetto" remarks="Progressivo del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="pg_rimodulazione" remarks="Progressivo rimodulazione del progetto di ricerca" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Unita' Organizzativa proprietaria della voce piano economico." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_voce_piano" remarks="Codice identificativo voce piano economico" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_piano" remarks="Esercizio piano economico. Se =0 indica il progetto complessivo." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="pg_variazione" remarks="Progressivo variazione nell'ambito della rimodulazione." type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_voce" remarks="Esercizio di riferimento" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="ti_appartenenza" remarks="Definisce l'appartenenza (CNR o CdS) delle voci del piano finanziario di riferimento&#10;&#10;Dominio:&#10;C=CNR&#10;D=CDS" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="ti_gestione" remarks="Definisce la sezione (entrata o spesa) delle voci del piano finanziario di riferimento.&#10;&#10;Dominio:&#10;E=Entrate&#10;S=Spese" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_elemento_voce" remarks="Codice dell'elemento voce" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="ti_operazione" remarks="Tipo di modifica - D:eliminato, A:Aggiunto, M:Modificato" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="im_var_spesa_finanziato" remarks="Importo Variazione Spesa Finanziato rimodulato" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_var_spesa_cofinanziato" remarks="Importo Variazione Spesa Cofinanziato rimodulato" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" remarks="Data di creazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" remarks="Utenza di creazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" remarks="Data di ultima variazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" remarks="Utenza di ultima variazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" remarks="Progressivo di versione del record: viene incrementato di 1 ad ogni variazione" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="pg_progetto, pg_rimodulazione, cd_unita_organizzativa, cd_voce_piano, esercizio_piano, pg_variazione" constraintName="progetto_rimodulaz_voce_pkey" tableName="progetto_rimodulazione_voce"/>

        <addForeignKeyConstraint baseColumnNames="pg_progetto, pg_rimodulazione" baseTableName="progetto_rimodulazione_voce" constraintName="fk_progetto_rimodulaz_voce00" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto, pg_rimodulazione" referencedTableName="progetto_rimodulazione"/>

        <addForeignKeyConstraint baseColumnNames="cd_unita_organizzativa,cd_voce_piano" baseTableName="progetto_rimodulazione_voce" constraintName="fk_progetto_rimodulaz_voce01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_unita_organizzativa,cd_voce_piano" referencedTableName="voce_piano_economico_prg"/>

        <createIndex indexName="FX_PROGETTO_RIMODULAZ_VOCE00" tableName="PROGETTO_RIMODULAZIONE_VOCE">
            <column name="PG_PROGETTO"/>
            <column name="PG_RIMODULAZIONE"/>
        </createIndex>

        <createIndex indexName="FX_PROGETTO_RIMODULAZ_VOCE01" tableName="PROGETTO_RIMODULAZIONE_VOCE">
            <column name="CD_UNITA_ORGANIZZATIVA"/>
            <column name="CD_VOCE_PIANO"/>
        </createIndex>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter-table-variazioni-add-column-rimodulazione">
        <addColumn tableName="pdg_variazione">
            <column name="pg_progetto_rimodulazione" type="BIGINT" remarks="Progressivo del progetto di ricerca oggetto della rimodulazione associata alla variazione."/>
            <column name="pg_rimodulazione" type="BIGINT" remarks="Progressivo rimodulazione del progetto di ricerca associata alla variazione."/>
        </addColumn>

        <addColumn tableName="var_stanz_res">
            <column name="pg_progetto_rimodulazione" type="BIGINT" remarks="Progressivo del progetto di ricerca oggetto della rimodulazione associata alla variazione."/>
            <column name="pg_rimodulazione" type="BIGINT" remarks="Progressivo rimodulazione del progetto di ricerca associata alla variazione."/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="pg_progetto_rimodulazione, pg_rimodulazione" baseTableName="pdg_variazione" constraintName="fk_pdg_variazione03" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto, pg_rimodulazione" referencedTableName="progetto_rimodulazione"/>

        <addForeignKeyConstraint baseColumnNames="pg_progetto_rimodulazione, pg_rimodulazione" baseTableName="var_stanz_res" constraintName="fk_var_stanz_res02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_progetto, pg_rimodulazione" referencedTableName="progetto_rimodulazione"/>

        <createIndex indexName="FX_PDG_VARIAZIONE03" tableName="PDG_VARIAZIONE">
            <column name="PG_PROGETTO_RIMODULAZIONE"/>
            <column name="PG_RIMODULAZIONE"/>
        </createIndex>

        <createIndex indexName="FX_VAR_STANZ_RES03" tableName="VAR_STANZ_RES">
            <column name="PG_PROGETTO_RIMODULAZIONE"/>
            <column name="PG_RIMODULAZIONE"/>
        </createIndex>
    </changeSet>

    <changeSet author="raffaele.pagano" id="accessi_rimodulazione_progetti">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGRIM"/>
            <column name="ti_accesso" type="CHAR(1)"  value="" />
            <column name="ds_accesso" type="VARCHAR(200)" value="Rimodula Progetti Area Progettuale"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGRIM"/>
            <column name="business_process" type="VARCHAR(200)" value="RimodulaProgettiRicercaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.LIV2.R"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Rimodula"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPROGERCOREPROGRIM"/>
            <column name="business_process" type="VARCHAR(200)" value="RimodulaProgettiRicercaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="4"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="R"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.LIV2"/>
            <column name="url_icona" type="VARCHAR(200)" value=""/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="nuova_stampa_buono_carico_scarico">
        <insert tableName="print_priority">
            <column name="report_name" type="VARCHAR(1500)" value="/cnrdocamm/docamm/buono_carico_scarico.jasper"/>
            <column name="priority" type="SMALLINT"  value="1" />
            <column name="ds_report" type="VARCHAR(300)" value="Stampa buono di carico/scarico"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_obbligazione_pgiro_modifica_add_imp">
        <addColumn tableName="obbligazione_pgiro_modifica">
            <column name="im_prima_modifica" type="numeric(15, 2)" remarks="Importo prima della modifica"/>
            <column name="im_dopo_modifica" type="numeric(15, 2)" remarks="Importo dopo la modifica"/>
            <column name="data_variazione" type="${date.type}" remarks="Data della Variazione alla partita di giro"/>
            <column name="utente_variazione" type="VARCHAR(20)" remarks="Utente della Variazione alla partita di giro"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="create-table-siope-plus-esito">
        <createTable remarks="Tabella contenente gli esiti di mandati e reversali." tableName="siope_plus_esito">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="prog_esito_applicativo" remarks="Progressivo esito applicativo" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="data_upload" remarks="Data upload" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="identificativo_flusso" remarks="Identificativo flusso" type="VARCHAR2(250)">
                <constraints nullable="false"/>
            </column>
            <column name="esito_operazione" remarks="Esito operazione" type="VARCHAR2(30)">
                <constraints nullable="false"/>
            </column>
            <column name="dt_ora_esito_operazione" remarks="Data Esito operazione siope+" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio_mandato" remarks="Esercizio mandato" type="INT"/>
            <column name="cd_cds_mandato" remarks="CdS mandato" type="VARCHAR2(30)"/>
            <column name="pg_mandato" remarks="Esercizio mandato" type="INT"/>
            <column name="esercizio_reversale" remarks="Esercizio reversale" type="INT"/>
            <column name="cd_cds_reversale" remarks="CdS reversale" type="VARCHAR2(30)"/>
            <column name="pg_reversale" remarks="Esercizio reversale" type="INT"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="siope_plus_esito_pkey" tableName="siope_plus_esito"/>
        <addForeignKeyConstraint
                baseColumnNames="cd_cds_mandato,esercizio_mandato,pg_mandato"
                baseTableName="siope_plus_esito"
                constraintName="fk_siope_plus_esito01"
                deferrable="false"
                initiallyDeferred="false"
                onDelete="NO ACTION"
                onUpdate="NO ACTION"
                referencedColumnNames="cd_cds,esercizio,pg_mandato"
                referencedTableName="mandato"/>
        <addForeignKeyConstraint
                baseColumnNames="cd_cds_reversale,esercizio_reversale,pg_reversale"
                baseTableName="siope_plus_esito"
                constraintName="fk_siope_plus_esito02"
                deferrable="false"
                initiallyDeferred="false"
                onDelete="NO ACTION"
                onUpdate="NO ACTION"
                referencedColumnNames="cd_cds,esercizio,pg_reversale"
                referencedTableName="reversale"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_mandato_add_stato_var_sos">
        <addColumn tableName="mandato">
            <column name="stato_var_sos" type="varchar2(30)" remarks="Stato Variazione/Sostituzione SIOPE+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_reversale_add_stato_var_sos">
        <addColumn tableName="reversale">
            <column name="stato_var_sos" type="varchar2(30)" remarks="Stato Variazione/Sostituzione SIOPE+"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="movimento_conto_evidenza_codice_rif_operazione">
        <modifyDataType tableName="movimento_conto_evidenza" columnName="codice_rif_operazione" newDataType="VARCHAR(250)"/>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter-table-contratto-flusso">
        <addColumn tableName="contratto">
            <column name="cd_cig_ext" type="VARCHAR(10)" remarks="Codice CIG proveniente da applicativo esterno"/>
            <column name="codfis_piva_rup_ext" type="VARCHAR(20)" remarks="Codice Fiscale o Partita IVA del rup proveniente da applicativo esterno"/>
            <column name="codfis_piva_firmatario_ext" type="VARCHAR(20)" remarks="Codice Fiscale o Partita IVA del firmatario proveniente da applicativo esterno"/>
            <column name="codfis_piva_aggiudicatario_ext" type="VARCHAR(20)" remarks="Codice Fiscale o Partita IVA dell'aggiudicatario proveniente da applicativo esterno"/>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter-table-contratto-codice-flusso-acquisti">
        <addColumn tableName="contratto">
            <column name="codice_flusso_acquisti" type="VARCHAR(50)" remarks="Codice Identificativo del flusso Acquisti"/>
        </addColumn>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="remove-table-contratto-not-null-fig-giur-est">
        <dropNotNullConstraint
                columnName="fig_giur_est"
                tableName="contratto"
                columnDataType="INT"/>
    </changeSet>

    <changeSet author="marco.spasiano" id="add-accesso-variazione-mandati">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="DOCMANDATCOREVARIAZM"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Variazione Mandato Trasmesso"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="DOCMANDATCOREVARIAZM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDMandatoVariazioneBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_movimenti_mag_drop_dup_columns">
        <dropForeignKeyConstraint baseTableName="movimenti_mag" constraintName="MOVIMENTI_MAG_FK01"/>
        <dropForeignKeyConstraint baseTableName="movimenti_mag" constraintName="MOVIMENTI_MAG_FK04"/>
        <dropForeignKeyConstraint baseTableName="movimenti_mag" constraintName="MOVIMENTI_MAG_FK05"/>
        <dropForeignKeyConstraint baseTableName="movimenti_mag" constraintName="MOVIMENTI_MAG_FK07"/>
        <dropForeignKeyConstraint baseTableName="movimenti_mag" constraintName="MOVIMENTI_MAG_FK11"/>
        <dropIndex indexName="FX_FX_MOVIMENTI_MAG05" tableName="movimenti_mag"/>
        <dropIndex indexName="FX_MOVIMENTI_MAG01" tableName="movimenti_mag"/>
        <dropIndex indexName="FX_MOVIMENTI_MAG04" tableName="movimenti_mag"/>
        <dropIndex indexName="FX_MOVIMENTI_MAG07" tableName="movimenti_mag"/>
        <dropIndex indexName="FX_MOVIMENTI_MAG11" tableName="movimenti_mag"/>

        <dropColumn columnName="CD_CDS_ORDINE" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_UNITA_OPERATIVA_ORDINE" tableName="movimenti_mag"/>
        <dropColumn columnName="ESERCIZIO_ORDINE" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_NUMERATORE_ORDINE" tableName="movimenti_mag"/>
        <dropColumn columnName="NUMERO_ORDINE" tableName="movimenti_mag"/>
        <dropColumn columnName="RIGA_ORDINE" tableName="movimenti_mag"/>
        <dropColumn columnName="CONSEGNA" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_CDS_MAG" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_MAGAZZINO" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_BENE_SERVIZIO" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_VOCE_IVA" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_CDS_BOLLA_SCA" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_MAGAZZINO_BOLLA_SCA" tableName="movimenti_mag"/>
        <dropColumn columnName="ESERCIZIO_BOLLA_SCA" tableName="movimenti_mag"/>
        <dropColumn columnName="CD_NUMERATORE_BOLLA_SCA" tableName="movimenti_mag"/>
        <dropColumn columnName="PG_BOLLA_SCA" tableName="movimenti_mag"/>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="alter_bolla_scarico_riga_mag_drop_dup_columns">
        <dropForeignKeyConstraint baseTableName="bolla_scarico_riga_mag" constraintName="BOLLA_SCARICO_RIGA_MAG_FK00"/>
        <dropForeignKeyConstraint baseTableName="bolla_scarico_riga_mag" constraintName="BOLLA_SCARICO_RIGA_MAG_FK01"/>
        <dropForeignKeyConstraint baseTableName="bolla_scarico_riga_mag" constraintName="BOLLA_SCARICO_RIGA_MAG_FK02"/>
        <dropForeignKeyConstraint baseTableName="bolla_scarico_riga_mag" constraintName="BOLLA_SCARICO_RIGA_MAG_FK04"/>
        <dropIndex indexName="FX_FX_BOLLA_SCARICO_RIGA_MAG02" tableName="bolla_scarico_riga_mag"/>
        <dropIndex indexName="FX_BOLLA_SCARICO_RIGA_MAG00" tableName="bolla_scarico_riga_mag"/>
        <dropIndex indexName="FX_BOLLA_SCARICO_RIGA_MAG01" tableName="bolla_scarico_riga_mag"/>
        <dropIndex indexName="FX_BOLLA_SCARICO_RIGA_MAG04" tableName="bolla_scarico_riga_mag"/>

        <dropColumn columnName="CD_CDS_ORDINE" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_UNITA_OPERATIVA" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="ESERCIZIO_ORDINE" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_NUMERATORE_ORDINE" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="NUMERO_ORDINE" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="RIGA_ORDINE" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CONSEGNA" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_BENE_SERVIZIO" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_UNITA_MISURA" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="QUANTITA" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="COEFF_CONV" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_CDS_LOTTO" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_MAGAZZINO_LOTTO" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="ESERCIZIO_LOTTO" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="CD_NUMERATORE_LOTTO" tableName="bolla_scarico_riga_mag"/>
        <dropColumn columnName="PG_LOTTO" tableName="bolla_scarico_riga_mag"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter-table-elemento-voce-add-column-rimodulazione">
        <addColumn tableName="elemento_voce">
            <column name="gg_deroga_obbl_comp_prg_scad" type="BIGINT" remarks="Giorni di deroga sulla scadenza del progetto per la creazione di obbligazioni di competenza."/>
            <column name="gg_deroga_obbl_res_prg_scad" type="BIGINT" remarks="Giorni di deroga sulla scadenza del progetto per la creazione di obbligazioni di residuo."/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter-table-contratto-add-column-progetto">
        <addColumn tableName="contratto">
            <column name="pg_progetto" type="BIGINT" remarks="Progressivo del progetto di ricerca associato al contratto attivo."/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter-table-tipo-finanziamento-add-flag-quad-contratto">
        <addColumn tableName="tipo_finanziamento">
            <column name="fl_quadra_contratto" type="CHAR(1)" defaultValue="N" remarks="Flag che indica se è consentito associare ad un progetto contratti per un importo superiore al finanziato - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_other_field_modify_column2">
        <addColumn tableName="progetto_other_field">
            <column name="im_fideiussione" remarks="Importo della fideiussione" type="numeric(15, 2)"/>
            <column name="dt_inizio_fideiussione" remarks="Data inizio della fideiussione." type="${date.type}"/>
            <column name="dt_fine_fideiussione" remarks="Data fine della fideiussione." type="${date.type}"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_other_field_modify_column3">
        <addColumn tableName="progetto_other_field">
            <column name="dt_rilascio_fideiussione" remarks="Data rilascio della fideiussione." type="${date.type}"/>
            <column name="im_svincolato_fideiussione" remarks="Importo svincolato della fideiussione" type="numeric(15, 2)"/>
            <column name="dt_svincolo_fideiussione" remarks="Data svincolo della fideiussione." type="${date.type}"/>
            <column name="id_esterno_fideiussione" remarks="Identificativo esterno della fideiussione" type="VARCHAR(30)"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_tipo_finanziamento_add_column">
        <addColumn tableName="tipo_finanziamento">
            <column name="fl_associa_contratto" type="CHAR(1)" defaultValue="N" remarks="Indica che i progetti aventi i tipi di finanziamento possono essere collegati a contratto - Dominio: S = Sì; N = No;"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" runOnChange="true" id="create-view-v-saldi-gae-voce-progetto">
        <sqlFile dbms="oracle" path="../expsigladb/View/V_SALDI_GAE_VOCE_PROGETTO.sql" relativeToChangelogFile="true" splitStatements="true" stripComments="false"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="nuova_stampa_piano_economico_progetto">
        <insert tableName="print_priority">
            <column name="report_name" type="VARCHAR(1500)" value="/cnrpreventivo/pdg/piano_economico_progetto.jasper"/>
            <column name="priority" type="SMALLINT"  value="1" />
            <column name="ds_report" type="VARCHAR(300)" value="Stampa Progetto Piano Economico"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" runOnChange="true" id="create-view-v-saldi-voce-progetto">
        <sqlFile dbms="oracle" path="../expsigladb/View/V_SALDI_VOCE_PROGETTO.sql" relativeToChangelogFile="true" splitStatements="true" stripComments="false"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_other_field_add_column">
        <addColumn tableName="progetto_other_field">
            <column name="fl_controlli_disabled" type="CHAR(1)" defaultValue="N" remarks="Indica se alcuni controlli sui progetti sono disattivati - Dominio: S = Sì; N = No;"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_rimodulazione_add_column">
        <addColumn tableName="progetto_rimodulazione">
            <column name="dt_stato_definitivo" remarks="Data in cui la rimodulazione ha assunto stato definitivo." type="${date.type}"/>
            <column name="motivo_rifiuto" remarks="Motivazione per cui la rimodulazione è stata rifiutata." type="VARCHAR(500)"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter_progetto_rimodulazione_add_column001">
        <addColumn tableName="progetto_rimodulazione">
            <column name="note" remarks="Annotazioni varie" type="VARCHAR(1000)"/>
        </addColumn>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter-distinta-cassiere-add-invia-pec">
        <addColumn tableName="distinta_cassiere">
            <column name="fl_invia_pec" type="CHAR(1)" defaultValue="Y" remarks="Invia PEC per le distinte con allegati - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="configurazione-cnr-add-uo-ragioneria">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="UO_SPECIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="UO_RAGIONERIA"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="aggiorna-commento-colonna-variazioni">
        <setColumnRemarks tableName="pdg_variazione"
                          columnName="ti_motivazione_variazione"
                          remarks="Motivazione per cui viene effettuata la variazione di trasferimento per il personale - Dominio: BAN = Bando; PRG = Proroga; ALT = Altre Spese; GEN = Generico; INC = Compensi Incentivanti; DER = Variazioni in deroga; TAE = Trasferimento Area; TAU = Trasferimento Autorizzato."
        />
        <setColumnRemarks tableName="var_stanz_res"
                          columnName="ti_motivazione_variazione"
                          remarks="Motivazione per cui viene effettuata la variazione di trasferimento per il personale - Dominio: BAN = Bando; PRG = Proroga; ALT = Altre Spese; GEN = Generico; INC = Compensi Incentivanti; DER = Variazioni in deroga; TAE = Trasferimento Area; TAU = Trasferimento Autorizzato."
        />
    </changeSet>

    <changeSet author="raffaele.pagano" id="inserimento-privilegio-reversale-incasso">
        <insert tableName="privilegio">
            <column name="cd_privilegio" type="STRING" value="REVINC"/>
            <column name="ds_privilegio" type="STRING" value="Abilitato alla selezione della tipologia di reversale in fase di emissione."/>
            <column name="ti_privilegio" type="STRING" value="C"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="marco.spasiano" id="alter_sospeso_add_mandato_riaccr">
        <addColumn tableName="sospeso">
            <column name="cd_cds_man_riaccr"
                    remarks="Codice identificativo del centro di spesa" type="VARCHAR(30)">
            </column>
            <column name="esercizio_man_riaccr"
                    remarks="Esercizio di riferimento" type="SMALLINT">
            </column>
            <column name="pg_mandato_man_riaccr"
                    remarks="Progressivo identificativo del mandato; univoco per CdS ed esercizio" type="BIGINT">
            </column>
        </addColumn>

        <createIndex indexName="FX_SOSPESO11" tableName="SOSPESO">
            <column name="CD_CDS_MAN_RIACCR"/>
            <column name="ESERCIZIO_MAN_RIACCR"/>
            <column name="PG_MANDATO_MAN_RIACCR"/>
        </createIndex>

        <addForeignKeyConstraint
                baseColumnNames="cd_cds_man_riaccr,esercizio_man_riaccr,pg_mandato_man_riaccr"
                baseTableName="sospeso"
                constraintName="fk_sospeso11"
                deferrable="false"
                initiallyDeferred="false"
                onDelete="NO ACTION"
                onUpdate="NO ACTION"
                referencedColumnNames="cd_cds,esercizio,pg_mandato"
                referencedTableName="mandato"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="resize-column-cms-node-ref">
        <modifyDataType tableName="incarichi_procedura_archivio"
                        columnName="cms_node_ref"
                        newDataType="VARCHAR(2000)" />
        <modifyDataType tableName="incarichi_repertorio_archivio"
                        columnName="cms_node_ref"
                        newDataType="VARCHAR(2000)" />
        <modifyDataType tableName="incarichi_repertorio_rapp"
                        columnName="cms_node_ref"
                        newDataType="VARCHAR(2000)" />
        <modifyDataType tableName="incarichi_repertorio_var"
                        columnName="cms_node_ref"
                        newDataType="VARCHAR(2000)" />
    </changeSet>

    <changeSet author="raffaele.pagano" id="nuova_stampa_bilancio_pluriennale">
        <insert tableName="print_priority">
            <column name="report_name" type="VARCHAR(1500)" value="/preventivo/preventivo/stampa_pdgp_bilancio_pluriennale.jasper"/>
            <column name="priority" type="SMALLINT"  value="1" />
            <column name="ds_report" type="VARCHAR(300)" value="Stampa Bilancio Pluriennale"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_ass_pgiro_gruppo_centro_doc_cont_segno_opposto">
        <addColumn tableName="ASS_PGIRO_GRUPPO_CENTRO">
            <column name="CD_CDS_ACC_PGIRO_OPP" remarks="Cds dell'accertamento di segno opposto" type="VARCHAR(30)"/>
            <column name="ES_ACC_PGIRO_OPP" remarks="Esercizio dell'accertamento di segno opposto" type="INT"/>
            <column name="ES_ORIG_ACC_PGIRO_OPP" remarks="Esercizio Originale dell'accertamento di segno opposto" type="INT"/>
            <column name="PG_ACC_PGIRO_OPP" remarks="Numero dell'accertamento di segno opposto" type="BIGINT"/>
            <column name="CD_CDS_OBB_PGIRO_OPP" remarks="Cds dell'obbligazione di segno opposto" type="VARCHAR(30)"/>
            <column name="ES_OBB_PGIRO_OPP" remarks="Esercizio dell'obbligazione di segno opposto" type="INT"/>
            <column name="ES_ORIG_OBB_PGIRO_OPP" remarks="Esercizio Originale dell'obbligazione di segno opposto" type="INT"/>
            <column name="PG_OBB_PGIRO_OPP" remarks="Numero dell'obbligazione di segno opposto" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_liquid_gruppo_cori_doc_cont_segno_opposto">
        <addColumn tableName="liquid_gruppo_cori">
            <column name="CD_CDS_ACC_ACCENTR_OPP" remarks="Cds dell'accertamento accentrato di segno opposto" type="VARCHAR(30)"/>
            <column name="ES_ACC_ACCENTR_OPP" remarks="Esercizio dell'accertamento accentrato di segno opposto" type="INT"/>
            <column name="ES_ORIG_ACC_ACCENTR_OPP" remarks="Esercizio Originale dell'accertamento accentrato di segno opposto" type="INT"/>
            <column name="PG_ACC_ACCENTR_OPP" remarks="Numero dell'accertamento accentrato di segno opposto" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_liquid_gruppo_centro_doc_cont_segno_opposto">
        <addColumn tableName="liquid_gruppo_centro">
            <column name="CD_CDS_ACC_ACCENTR_OPP" remarks="Cds dell'accertamento accentrato di segno opposto" type="VARCHAR(30)"/>
            <column name="ES_ACC_ACCENTR_OPP" remarks="Esercizio dell'accertamento accentrato di segno opposto" type="INT"/>
            <column name="ES_ORIG_ACC_ACCENTR_OPP" remarks="Esercizio Originale dell'accertamento accentrato di segno opposto" type="INT"/>
            <column name="PG_ACC_ACCENTR_OPP" remarks="Numero dell'accertamento accentrato di segno opposto" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_liquid_gruppo_centro_comp_doc_cont_segno_opposto">
        <addColumn tableName="liquid_gruppo_centro_Comp">
            <column name="CD_CDS_OBB_ACCENTR_OPP" remarks="Cds dell'obbligazione accentrata di segno opposto" type="VARCHAR(30)"/>
            <column name="ES_OBB_ACCENTR_OPP" remarks="Esercizio dell'obbligazione accentrata di segno opposto" type="INT"/>
            <column name="ES_ORIG_OBB_ACCENTR_OPP" remarks="Esercizio Originale dell'obbligazione accentrata di segno opposto" type="INT"/>
            <column name="PG_OBB_ACCENTR_OPP" remarks="Numero dell'obbligazione accentrata di segno opposto" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="ciro.salvio" id="addColumn-qta_carico_lotto-tipo_movimento_mag">
        <addColumn tableName="tipo_movimento_mag">
            <column name="qta_carico_lotto" remarks="LOTTI.VALORI:0=Azzera;S=Sostituisci;+=Incrementa;-Decrementa;N=Nessuna variazione." type="VARCHAR(1)"/>
        </addColumn>
    </changeSet>

    <changeSet author="ciro.salvio" id="addNotNullQta_carico_lotto-tipo_movimento_mag">
        <addNotNullConstraint columnName="qta_carico_lotto" tableName="tipo_movimento_mag" columnDataType="VARCHAR(1)"/>
    </changeSet>

    <changeSet author="gianfranco.gasparro" id="resize-column-telefono-riferimento">
        <modifyDataType tableName="telefono"
                        columnName="riferimento"
                        newDataType="VARCHAR(100)" />
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="configurazione-cnr-fix-cds-sac">
        <delete tableName="configurazione_cnr">
            <where>CD_UNITA_FUNZIONALE='*' AND CD_CHIAVE_PRIMARIA='CDS_SPECIALE' AND CD_CHIAVE_SECONDARIA='CDS_SAC'</where>
        </delete>
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="CDS_SPECIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="CDS_SAC"/>
            <column name="val01" type="STRING" value="000"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet id="voce_menu_consultazioni_ordini_acq" author="ciro.salvio">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDCONCONSEGNAV"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzaione Ordini Consegna"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDCONCONSEGNAV"/>
            <column name="business_process" type="VARCHAR(200)" value="ParametriSelezioneOrdiniConsegnaAcqBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.ORD.CON"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Consultazioni"/>
            <column name="pg_ordinamento" type="BIGINT" value="5"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="2"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="CON"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.ORD"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.ORD.CON.CONSEGNA_ORDDINI"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="business_process" type="VARCHAR(200)" value="Visualizzaione Ordini Consegna"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.ORD.CON"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.ORD.CON.CONSEGNA_ORDDINI.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Visualizzaione Ordini Consegna"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDCONCONSEGNAV"/>
            <column name="business_process" type="VARCHAR(200)" value="ParametriSelezioneOrdiniConsegnaAcqBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.ORD.CON.CONSEGNA_ORDDINI"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet id="change_voce_menu_consultazioni_ordini_acq" author="ciro.salvio">
        <delete tableName="albero_main">
            <where>cd_nodo='0.ORD.CON.CONSEGNA_ORDDINI'</where>
        </delete>
        <update tableName="albero_main">
            <column name="cd_nodo" value='0.ORD.CON.VISORDCONSEGNA' type="VARCHAR(100)"/>
            <where>cd_nodo = '0.ORD.CON.CONSEGNA_ORDDINI.V'</where>
        </update>
    </changeSet>
    <changeSet id="add_voce_menu_consultazioni_ordini_acq" author="ciro.salvio">
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.ORD.CON.VISORDCONSEGNA"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Visualizzaione Ordini Consegna"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDCONCONSEGNAV"/>
            <column name="business_process" type="VARCHAR(200)" value="ParametriSelezioneOrdiniConsegnaAcqBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.ORD.CON"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet id="mod_cd_proprio_nodo_consultazioni_ordini_acq" author="ciro.salvio">
        <update tableName="albero_main">
            <column name="cd_proprio_nodo" value='VISORDCONSEGNA' type="VARCHAR(100)"/>
            <where>cd_nodo = '0.ORD.CON.VISORDCONSEGNA'</where>
        </update>
    </changeSet>
    <changeSet id="voce_menu_evasione_forzata_ordini_acq" author="ciro.salvio">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDEVAFORACQ"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Evasione Forzata Ordini d’Acquisto"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDEVAFORACQ"/>
            <column name="business_process" type="VARCHAR(200)" value="EvasioneForzataOrdiniAcqDaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.ORD.EVAFORORDACQ"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Evasione Forzata Ordini d’Acquisto"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="ORDEVAFORACQ"/>
            <column name="business_process" type="VARCHAR(200)" value="EvasioneForzataOrdiniAcqDaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="EVAFORORDACQ"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.ORD"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet id="mod_livello_consultazioni_ordini_acq" author="ciro.salvio">
        <update tableName="albero_main">
            <column name="livello" value='3' type="SMALLINT"/>
            <where>cd_nodo = '0.ORD.CON.VISORDCONSEGNA'</where>
        </update>
    </changeSet>
    <changeSet id="mod_livello_prog_evasione_forzata_ordini_acq" author="ciro.salvio">
        <update tableName="albero_main">
            <column name="livello" value='2' type="SMALLINT"/>
            <column name="pg_ordinamento" type="BIGINT" value="5"/>
            <where>cd_nodo = '0.ORD.EVAFORORDACQ'</where>
        </update>
    </changeSet>

    <changeSet id="prog_consultazioni_ordini_acq" author="ciro.salvio">
        <update tableName="albero_main">
            <column name="pg_ordinamento" type="BIGINT" value="4"/>
            <where>cd_nodo = '0.ORD.CON.VISORDCONSEGNA'</where>
        </update>
    </changeSet>
    <changeSet id="prog_evasioni_ordini" author="ciro.salvio">
        <update tableName="albero_main">
            <column name="pg_ordinamento" type="BIGINT" value="5"/>
            <where>cd_nodo = '0.ORD.EVAORD'</where>
        </update>
    </changeSet>
    <changeSet id="prog_evasioni_forzata_ordini" author="ciro.salvio">
        <update tableName="albero_main">
            <column name="pg_ordinamento" type="BIGINT" value="6"/>
            <where>cd_nodo = '0.ORD.EVAFORORDACQ'</where>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="create-table-ass-catgrp-invent-voce-ep">
        <createTable remarks="Tabella di associazione tra Conti Economici e Categorie" tableName="ass_catgrp_invent_voce_ep">
            <column name="cd_categoria_gruppo" remarks="Codice Categoria" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio" remarks="Esercizio." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_voce_ep" remarks="Codice Identificativo completo del conto del piano." type="VARCHAR(45)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" remarks="Data di creazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" remarks="Utenza di creazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" remarks="Data di ultima variazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" remarks="Utenza di ultima variazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" remarks="Progressivo di versione del record: viene incrementato di 1 ad ogni variazione" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="fl_default" type="CHAR(1)"/>
        </createTable>

        <addPrimaryKey columnNames="cd_categoria_gruppo, esercizio, cd_voce_ep" constraintName="ass_catgrp_invent_voce_ep_pk" tableName="ass_catgrp_invent_voce_ep"/>

        <addForeignKeyConstraint baseColumnNames="cd_categoria_gruppo" baseTableName="ass_catgrp_invent_voce_ep" constraintName="fk_ass_catgrp_invent_voce_ep01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_categoria_gruppo" referencedTableName="categoria_gruppo_invent"/>

        <addForeignKeyConstraint baseColumnNames="esercizio, cd_voce_ep" baseTableName="ass_catgrp_invent_voce_ep" constraintName="fk_ass_catgrp_invent_voce_ep02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,cd_voce_ep" referencedTableName="voce_ep"/>

        <createIndex indexName="fx_ass_catgrp_invent_voce_ep00" tableName="ass_catgrp_invent_voce_ep">
            <column name="CD_CATEGORIA_GRUPPO"/>
        </createIndex>
        <createIndex indexName="fx_ass_catgrp_invent_voce_ep01" tableName="ass_catgrp_invent_voce_ep">
            <column name="ESERCIZIO"/>
            <column name="CD_VOCE_EP"/>
        </createIndex>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_ordine_acq_consegna_voce_ep">
        <addColumn tableName="ordine_acq_consegna">
            <column name="ESERCIZIO_EP" remarks="Esercizio Conto EP" type="SMALLINT"/>
            <column name="CD_VOCE_EP" remarks="Codice Conto EP" type="VARCHAR(45)"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="esercizio_ep, cd_voce_ep" baseTableName="ordine_acq_consegna" constraintName="fk_ordine_acq_consegna05" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="esercizio,cd_voce_ep" referencedTableName="voce_ep"/>
        <createIndex indexName="fx_ordine_acq_consegna05" tableName="ordine_acq_consegna">
            <column name="ESERCIZIO_EP"/>
            <column name="CD_VOCE_EP"/>
        </createIndex>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="configurazione-cnr-add-imputazione-manuale-voce-ep">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="ECONOMICO_PATRIMONIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="IMPUTAZIONE_MANUALE"/>
            <column name="val01" type="STRING" value="N"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet id="help-add-column-bpname" author="marco.spasiano">
        <addColumn tableName="help_lkt">
            <column name="bp_name" remarks="Nome del Business process" type="VARCHAR(50)"/>
        </addColumn>
        <dropNotNullConstraint tableName="help_lkt" columnName="page" columnDataType="VARCHAR(2000)"></dropNotNullConstraint>
    </changeSet>
    <changeSet id="help-modify-data-type" author="marco.spasiano">
        <createSequence sequenceName="pg_help"/>
        <dropPrimaryKey tableName="help_lkt"></dropPrimaryKey>
        <dropColumn tableName="help_lkt" columnName="cd_help"></dropColumn>
        <addColumn tableName="help_lkt">
            <column name="id" remarks="Chiave" type="SMALLINT"/>
        </addColumn>
        <update tableName="help_lkt">
            <column name="id" valueSequenceNext="pg_help"></column>
        </update>
        <addNotNullConstraint tableName="help_lkt" columnName="id" columnDataType="SMALLINT"></addNotNullConstraint>
        <addPrimaryKey tableName="help_lkt" columnNames="id"></addPrimaryKey>
        <dropSequence sequenceName="pg_help"></dropSequence>
    </changeSet>
    <changeSet author="ciro.salvio" id="associazione_categoria_gruppo_voce_economica">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="AMMFATTURTABRCTGRVOC"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Categoria Gruppo Voce Economica"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="AMMFATTURTABRCTGRVOM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione Categoria Gruppo Voce Economica"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="AMMFATTURTABRCTGRVOC"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDCatGrupVoceBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="AMMFATTURTABRCTGRVOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDCatGrupVoceBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>

            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.FATTUR.TABR.CTGRVC"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Cat. Gruppo Voce Economica"/>
            <column name="pg_ordinamento" type="BIGINT" value="18"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="CTGRVC"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.FATTUR.TABR"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.FATTUR.TABR.CTGRVC.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Gestione"/>
            <column name="cd_accesso" type="VARCHAR(200)" value="AMMFATTURTABRCTGRVOC"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDCatGrupVoceBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="2"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="5"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.FATTUR.TABR.CTGRVC"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.FATTUR.TABR.CTGRVC.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(200)" value="AMMFATTURTABRCTGRVOM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDCatGrupVoceBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="2"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="5"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.FATTUR.TABR.CTGRVC"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter-table-comunica-pagamenti-elemento-voce">
        <addColumn tableName="elemento_voce">
            <column name="fl_comunica_pagamenti" remarks="Indica se i mandati della voce di bilancio devono essere pubblicati" type="CHAR(1)" />
        </addColumn>
        <update tableName="elemento_voce">
            <column name="fl_comunica_pagamenti" value='N' type="CHAR(1)" />
        </update>
        <addNotNullConstraint columnName="fl_comunica_pagamenti" tableName="elemento_voce" columnDataType="CHAR(1)"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="addColumn-importo-limite-classificazione">
        <addColumn tableName="classificazione_voci">
            <column name="im_limite_assestato" remarks="Importo limite assestato da assumere. Tale importo viene suddiviso tra CDS tramite valorizzazione tabella limite_spesa_class" type="numeric(15, 2)"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-limite-spesa-class">
        <createTable remarks="Tabella di dettaglio dei limite di spesa per classificazione - importo limite suddivisa per CDS" tableName="limite_spesa_class">
            <column name="id_classificazione" remarks="Identificativo univoco della classificazione ufficiale" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_cds" remarks="Codice Cds" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="im_limite_assestato" remarks="Importo del limite di spesa" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" remarks="Utenza di creazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" remarks="Data di creazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" remarks="Utenza di ultima variazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" remarks="Data di ultima variazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" remarks="Progressivo di versione del record: viene incrementato di 1 ad ogni variazione" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id_classificazione, cd_cds" constraintName="limite_spesa_class_pkey" tableName="limite_spesa_class"/>
        <addForeignKeyConstraint baseColumnNames="id_classificazione" baseTableName="limite_spesa_class" constraintName="limite_spesa_class_fk01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id_classificazione" referencedTableName="classificazione_voci"/>
        <addForeignKeyConstraint baseColumnNames="cd_cds" baseTableName="limite_spesa_class" constraintName="limite_spesa_class_fk02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_unita_organizzativa" referencedTableName="unita_organizzativa"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="elemento-voce-add-column-limiti-spesa">
        <addColumn tableName="elemento_voce">
            <column name="fl_limite_competenza" type="CHAR(1)" defaultValue="N" remarks="Applicazione limiti spesa - Limite Competenza - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
            <column name="fl_limite_residui_impropri" type="CHAR(1)" defaultValue="N" remarks="Applicazione limiti spesa - Limite Residui Impropri - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="Gestione limiti spesa per classificazione voce">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDCFINLIMSPECLASM"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Limite Spesa Classificazione"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDCFINLIMSPECLASV"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione Limite Spesa Classificazione"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDCFINLIMSPECLASM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDLimiteSpesaClassBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDCFINLIMSPECLASV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDLimiteSpesaClassBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PDCFIN.LIMSPECLASS"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Limite Spesa Classificazione"/>
            <column name="pg_ordinamento" type="BIGINT" value="240"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="LIMSPECLASS"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PDCFIN"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PDCFIN.LIMSPECLASS.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(200)" value="CFGPDCFINLIMSPECLASM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDLimiteSpesaClassBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PDCFIN.LIMSPECLASS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PDCFIN.LIMSPECLASS.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(200)" value="CFGPDCFINLIMSPECLASV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDLimiteSpesaClassBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="20"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PDCFIN.LIMSPECLASS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="parametri-cds-add-column-limiti-residui-impropri">
        <addColumn tableName="parametri_cds">
            <column name="fl_limite_residui_impropri" type="CHAR(1)" defaultValue="N" remarks="Applicazione limiti spesa - Limite Residui Impropri - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="marco.spasiano" id="utente-change-column-size-password">
        <modifyDataType tableName="UTENTE" columnName="PASSWORD" newDataType="VARCHAR(50)"></modifyDataType>
    </changeSet>
    <changeSet author="marco.spasiano" id="ldap-server-drop">
        <dropTable tableName="LDAP_SERVER"></dropTable>
    </changeSet>

    <changeSet author="raffaele.pagano" id="incarichi-parametri-add-column-allega-conflitto-interesse">
        <addColumn tableName="incarichi_parametri">
            <column name="allega_conflitto_interesse" type="CHAR(1)"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="configurazione_cnr-add-data-inizio-riduzione-cuneo-dl320">
        <insert tableName="configurazione_cnr" dbms="oracle">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="RIDUZIONE_CUNEO_DL_3_2020"/>
            <column name="cd_chiave_secondaria" type="STRING" value="DATA_INIZIO"/>
            <column name="dt01" type="${date.type}" valueDate="to_Date('01072020','ddmmyyyy')"/>
            <column name="dt02" type="${date.type}" valueDate="to_Date('31122100','ddmmyyyy')"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="configurazione_cnr" dbms="postgresql">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="RIDUZIONE_CUNEO_DL_3_2020"/>
            <column name="cd_chiave_secondaria" type="STRING" value="DATA_INIZIO"/>
            <column name="dt01" type="${date.type}" valueDate="to_timestamp('2020-01-07','YYYY-mm-DD')"/>
            <column name="dt02" type="${date.type}" valueDate="to_timestamp('2100-12-31','YYYY-mm-DD')"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-credito_irper-detrazioni-riduzione_cuneo">
        <addColumn tableName="credito_irpef">
            <column name="fl_detrazione" type="CHAR(1)" defaultValue="N" remarks="Indica se il credito funziona come detrazione">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-compenso-detrazioni-riduzione_cuneo">
        <addColumn tableName="compenso">
            <column name="detrazione_riduzione_cuneo" remarks="Detrazione per riduzione cuneo DL 3/2020" type="numeric(15, 2)">
            </column>
            <column name="detrazione_rid_cuneo_netto" remarks="Detrazione netto per riduzione cuneo DL 3/2020" type="numeric(15, 2)">
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-credito_irpef-im_credito_base">
        <addColumn tableName="credito_irpef">
            <column name="im_credito_base" defaultValue="0" remarks="Nel caso di formula attiva viene indicato il valore fisso del credito da aggiungere a quello che viene calcolato dalla formula" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-anagrafico_esercizio-no_credito_cuneo_irpef">
        <addColumn tableName="anagrafico_esercizio">
            <column name="fl_no_credito_cuneo_irpef" type="CHAR(1)" defaultValue="N" remarks="Indicatore di gestione del Credito Cuneo Fisclae irpef. Dominio Y = SI Non deve essere applicato il credito cuneo fiscale irpef. N = NO Deve essere applicato il credito cuneo fiscale irpef">
                <constraints nullable="false"/>
            </column>
            <column name="fl_no_detr_cuneo_irpef" type="CHAR(1)" defaultValue="N" remarks="Indicatore di gestione del Credito Cuneo Fisclae irpef. Dominio Y = SI Non deve essere applicato il credito cuneo fiscale irpef. N = NO Deve essere applicato il credito cuneo fiscale irpef">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addNotNull-compenso-detrazione_cuneo">
        <addNotNullConstraint columnName="detrazione_riduzione_cuneo" tableName="compenso" defaultNullValue="0" columnDataType="numeric(15, 2)"/>
        <addNotNullConstraint columnName="detrazione_rid_cuneo_netto" tableName="compenso" defaultNullValue="0" columnDataType="numeric(15, 2)"/>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-conguaglio-detrazioni-riduzione_cuneo">
        <addColumn tableName="conguaglio">
            <column name="detrazione_rid_cuneo_esterno" defaultValue="0" remarks="Detrazione netto per riduzione cuneo DL 3/2020" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="detrazione_rid_cuneo_goduto" defaultValue="0" remarks="Detrazione netto per riduzione cuneo DL 3/2020" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="detrazione_rid_cuneo_dovuto" defaultValue="0" remarks="Detrazione netto per riduzione cuneo DL 3/2020" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-conguaglio-no_credito_cuneo_irpef">
        <addColumn tableName="conguaglio">
            <column name="fl_no_credito_cuneo_irpef" type="CHAR(1)" defaultValue="N" remarks="Indicatore di gestione del Credito Cuneo Fiscale irpef. Dominio Y = SI Applicato il credito cuneo fiscale irpef. N = Non applicato il credito cuneo fiscale irpef">
                <constraints nullable="false"/>
            </column>
            <column name="fl_no_detr_cuneo_irpef" type="CHAR(1)" defaultValue="N" remarks="Indicatore di gestione della detrazione del Cuneo Fiscale irpef. Dominio Y = SI Applicata la detrazione cuneo fiscale irpef. N = Non applicata la detrazione cuneo fiscale irpef">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-credito_irpef-cd_cori">
        <addColumn tableName="credito_irpef">
            <column name="cd_cori" type="VARCHAR(10)" remarks="Codice contributo ritenuta collegato al Credito Irpef">
            </column>
            <column name="dt_ini_validita_cori" type="DATE" remarks="Data inizio validita contributo ritenuta collegato al Credito Irpef">
            </column>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="cd_cori,dt_ini_validita_cori" baseTableName="credito_irpef" constraintName="fk_credito_irpef01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_contributo_ritenuta, dt_ini_validita" referencedTableName="tipo_contributo_ritenuta"/>
        <createIndex indexName="fx_credito_irpef01" tableName="credito_irpef">
            <column name="cd_cori"/>
            <column name="dt_ini_validita_cori"/>
        </createIndex>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-tmp_report_generico-importi_rid_cuneo"  dbms="oracle">
        <addColumn tableName="tmp_report_generico">
            <column name="importo_56" remarks="Importo 56" type="numeric(20, 3)">
            </column>
            <column name="importo_57" remarks="Importo 57" type="numeric(20, 3)">
            </column>
            <column name="importo_58" remarks="Importo 58" type="numeric(20, 3)">
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-conguaglio-divisione_importi_credito_bonus">
        <addColumn tableName="conguaglio">
            <column name="im_bonus_irpef_dovuto" defaultValue="0" remarks="Importo bonus DL 66/2014 dovuto" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="im_bonus_irpef_goduto" defaultValue="0" remarks="Importo bonus DL 66/2014 goduto" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn-tmp_report_generico-importi_bonus" dbms="oracle">
        <addColumn tableName="tmp_report_generico">
            <column name="importo_59" remarks="Importo 60" type="numeric(20, 3)">
            </column>
            <column name="importo_60" remarks="Importo 59" type="numeric(20, 3)">
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="update-conguaglio-importi_bonus">
        <update tableName="conguaglio">
            <column name="im_bonus_irpef_dovuto" valueComputed='im_credito_irpef_dovuto'/>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="update-conguaglio-importi_bonus_goduto">
        <update tableName="conguaglio">
            <column name="im_bonus_irpef_goduto" valueComputed='im_credito_irpef_goduto'/>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="update-conguaglio-azzera-credito">
        <update tableName="conguaglio">
            <column name="im_credito_irpef_dovuto" value='0'/>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="update-conguaglio-azzera-credito-goduto">
        <update tableName="conguaglio">
            <column name="im_credito_irpef_goduto" value='0'/>
        </update>
    </changeSet>
    <changeSet id="add-column-abil_progetto_strorg-on-cds" author="marco.spasiano">
        <addColumn tableName="parametri_cds">
            <column name="abil_progetto_strorg" type="VARCHAR(3)"></column>
        </addColumn>
    </changeSet>
    <changeSet id="add-column-dt_ini_val_gr_iva-on-anagrafico" author="gianfranco.gasparro">
        <addColumn tableName="anagrafico">
            <column name="dt_ini_val_gruppo_iva" type="${date.type}"></column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="create_table_ass_gruppo_iva_anag">
        <createTable remarks="Tabella contenente le associazioni tra anagrafico di tipo Gruppo IVA e anagrafico diverse da Gruppo IVA." tableName="ass_gruppo_iva_anag">
            <column name="cd_anag_gr_iva" remarks="Anagrafico Gruppo IVA" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_anag" remarks="Anagrafico non di tipo Gruppo IVA" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="stato" type="varchar2(3)" remarks="Stato della distinta siope+">
                <constraints nullable="false"/>
            </column>
            <column name="dt_cancellazione" remarks="Data Cancellazione" type="${date.type}"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="cd_anag_gr_iva,cd_anag" constraintName="ass_gruppo_iva_anag_pkey" tableName="ass_gruppo_iva_anag"/>

        <addForeignKeyConstraint baseColumnNames="cd_anag_gr_iva" baseTableName="ass_gruppo_iva_anag" constraintName="fk_ass_gruppo_iva_anag01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_anag" referencedTableName="anagrafico"/>

        <addForeignKeyConstraint baseColumnNames="cd_anag" baseTableName="ass_gruppo_iva_anag" constraintName="fk_ass_gruppo_iva_anag02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_anag" referencedTableName="anagrafico"/>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="create_index-inventario_beni-targa">
        <createIndex indexName="ix_inventario_beni01" tableName="inventario_beni">
            <column name="TARGA"/>
        </createIndex>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_documento_ele_iva-modify-natura">
        <modifyDataType tableName="documento_ele_iva" columnName="natura" newDataType="VARCHAR(4)"/>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_documento_ele_tributi-modify-natura">
        <modifyDataType tableName="documento_ele_tributi" columnName="natura" newDataType="VARCHAR(4)"/>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_voce_iva-modify-natura">
        <modifyDataType tableName="voce_iva" columnName="natura_oper_non_imp_sdi" newDataType="VARCHAR(4)"/>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-cons-pdgp-prog-gae">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDGPCONSPROGGAE"/>
            <column name="ti_accesso" type="CHAR(1)" value=""/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Consultazione PdGP - Progetto/GAE"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDGPCONSPROGGAE"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsProgEcoVoceGaeBP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.PRV.PDGMODAGG.CON.PDGPPROGGAE"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Consultazione PDGP - Progetto/GAE"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDGPCONSPROGGAE"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsProgEcoVoceGaeBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="90"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="PDGPPROGGAE"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.PRV.PDGMODAGG.CON"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="fix-accesso-cons-pdgp-prog-gae">
        <update tableName="accesso">
            <column name="ti_accesso" value='D' type="CHAR(1)"/>
            <where>cd_accesso = 'CFGPDGPCONSPROGGAE'</where>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="fix-accesso-nome-cons-pdgp-prog-gae">
        <update tableName="accesso">
            <column name="ds_accesso" value='Movimentazione Piano Economico' type="CHAR(200)"/>
            <where>cd_accesso = 'CFGPDGPCONSPROGGAE'</where>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="fix-albero_main-ds_nodo">
        <update tableName="albero_main">
            <column name="ds_nodo" value='Movimentazione Piano Economico' type="CHAR(200)"/>
            <where>cd_nodo = '0.PRV.PDGMODAGG.CON.PDGPPROGGAE'</where>
        </update>
    </changeSet>
    <changeSet id="add_data_rifiuto_fattura_motivi_pred" author="marco.spasiano">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" value="0"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="COSTANTI"/>
            <column name="cd_chiave_secondaria" type="STRING" value="DATA_RIFIUTO_FATTURA_SDI_MOTIVI_PREDEFINITI"/>
            <column name="dt01" type="${date.type}" valueDate="${data_rifiuto_fattura}"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet id="modify_position_CFGPDGPCONSPROGGAE" author="gianfranco.gasparro">
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.CONS"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Consultazioni"/>
            <column name="pg_ordinamento" type="BIGINT" value="6"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="CONS"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <delete tableName="albero_main">
            <where>cd_nodo = '0.PRV.PDGMODAGG.CON.PDGPPROGGAE'</where>
        </delete>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.PROGETTI.CONS.MOVPIAECO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Movimentazione Piano Economico"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPDGPCONSPROGGAE"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsProgEcoVoceGaeBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="MOVPIAECO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.PROGETTI.CONS"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet id="add_collegamento_nota_fattura_sdi" author="marco.spasiano">
        <addColumn tableName="documento_ele_testata">
            <column name="id_paese_fat_col" type="VARCHAR(2)"/>
            <column name="id_codice_fat_col" type="VARCHAR(28)"/>
            <column name="identificativo_sdi_fat_col" type="BIGINT"/>
            <column name="progressivo_fat_col" type="BIGINT"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="id_paese_fat_col,id_codice_fat_col,identificativo_sdi_fat_col,progressivo_fat_col"
                                 baseTableName="documento_ele_testata"
                                 constraintName="fk_doc_ele_testata03"
                                 deferrable="false"
                                 initiallyDeferred="false"
                                 onDelete="NO ACTION"
                                 onUpdate="NO ACTION"
                                 referencedColumnNames="id_paese,id_codice,identificativo_sdi,progressivo"
                                 referencedTableName="documento_ele_testata"/>

    </changeSet>

    <changeSet author="raffaele.pagano" id="inserimento-privilegio-sblocco-impegni">
        <insert tableName="privilegio">
            <column name="cd_privilegio" type="STRING" value="SBLIMP"/>
            <column name="ds_privilegio" type="STRING" value="Abilitato alla creazione/modifica degli impegni anche in caso di blocco."/>
            <column name="ti_privilegio" type="STRING" value="C"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter-table-elemento-voce-add-column-blocco-impegni-natfin">
        <addColumn tableName="elemento_voce">
            <column name="blocco_impegni_natfin" remarks="Blocco impegni per natura e finanziamento sulla base dei valori Configurazione_cnrBulk.PK_BLOCCO_RESIDUI e Configurazione_cnrBulk.SK_NATURA_FINANZIAMENTO - Dominio (
                'C' = Solo Competenza,
                'R' = Solo Residui,
                'A' = Competenza/Residui,
                'N' = Nessuno)" type="CHAR(1)"/>
        </addColumn>
    </changeSet>

    <changeSet author="raffaele.pagano" id="update-column-blocco-impegni-table-elemento-voce">
        <sql>
            update elemento_voce
            set blocco_impegni_natfin = 'N';
        </sql>
        <sql>
            update elemento_voce
            set blocco_impegni_natfin = 'R'
            where FL_LIMITE_RESIDUI_IMPROPRI = 'Y';
        </sql>
    </changeSet>

    <changeSet author="raffaele.pagano" id="alter-table-elemento-voce-modify-column-blocco-impegni-natfin">
        <addNotNullConstraint columnName="blocco_impegni_natfin" tableName="elemento_voce" columnDataType="CHAR(1)"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="drop-column-limite-residui-impropri-table-elemento-voce">
        <dropColumn tableName="elemento_voce" columnName="fl_limite_residui_impropri"/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="rename-column-limite-residui-impropri-table-parametri-cds">
        <renameColumn oldColumnName="fl_limite_residui_impropri" newColumnName="fl_blocco_impegni_natfin" tableName="parametri_cds" remarks="Blocco impegni per natura e finanziamento sulla base dei valori Configurazione_cnrBulk.PK_BLOCCO_RESIDUI e Configurazione_cnrBulk.SK_NATURA_FINANZIAMENTO. Il flag lavora insieme a quello identico presente sull'elemento voce."/>
    </changeSet>

    <changeSet author="raffaele.pagano" id="create-table-pea-ccordinate">
        <createTable remarks="Tabella contenente le coordinate bancrie dei dipendenti NSIP" tableName="pea_coordinate">
            <column name="dip_id" type="NUMBER(5)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_mod_pag" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_mod_out" type="CHAR(2)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_cab" type="CHAR(5)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_abi" type="CHAR(5)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_num_conto" type="CHAR(12)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_st_corrente" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_delega" type="CHAR(40)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_piazza" type="CHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_tipo_op" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="coo_data_op" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="coo_cin" type="CHAR(1)"/>
            <column name="coo_iban" type="CHAR(34)"/>
        </createTable>
    </changeSet>

    <changeSet author="raffaele.pagano" id="inserimento-batch-agg-coordinate-dipendenti">
        <insert tableName="batch_log_tipo">
            <column name="cd_log_tipo" type="STRING" value="REG_NSIP00"/>
            <column name="ti_log" type="STRING" value="0"/>
            <column name="ds_log_tipo" type="STRING" value="Aggiornamento coordinate bancarie dipendenti NSIP"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>

        <insert tableName="batch_procedura">
            <column name="cd_procedura" type="STRING" value="AGGMODPAGDIPENDENTI"/>
            <column name="ds_procedura" type="STRING" value="Aggiornamento modalità pagamento dipendenti da NSIP."/>
            <column name="object_name" type="STRING" value="JOB_AGGIORNA_COORD_BANCARIE"/>
            <column name="package_name" type="STRING" value="CNRMIG080"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>

        <insert tableName="batch_procedura_parametro">
            <column name="cd_procedura" type="STRING" value="AGGMODPAGDIPENDENTI"/>
            <column name="nome_parametro" type="STRING" value="NRGIORNIBACK"/>
            <column name="pg_valore_parametro" type="NUMERIC" value="1"/>
            <column name="valore_number" type="NUMERIC" value="3"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-cons-liquid_cori">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGCONSLIQUIDCORI"/>
            <column name="ti_accesso" type="CHAR(1)" value="C"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Consultazione CORI Liquidati"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGCONSLIQUIDCORI"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsLiquidCoriBP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.COMPEN.CORI.CONSCORILIQ"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Consultazione CORI Liquidati"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGCONSLIQUIDCORI"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsLiquidCoriBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="90"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="CONSCORILIQ"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.COMPEN.CORI"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="raffaele.pagano" id="add-riferimenti-perla2018">
        <addColumn tableName="unita_organizzativa">
            <column name="codiceAooIpa" type="VARCHAR(100)" remarks="Codice univoco ipa che identifica le Aree Organizzative Omogenee (AOO) dell’Amministrazione dichiarante"/>
        </addColumn>
        <addColumn tableName="incarichi_repertorio">
            <column name="idPerla" type="BIGINT" remarks="Identificativo attribuito dal sistema perla all'incarico."/>
        </addColumn>
    </changeSet>
    <changeSet author="raffaele.pagano" id="incarichi-disable-invio-corte-conti">
        <update tableName="incarichi_parametri">
            <column name="fl_invio_fp" value='N' type="CHAR(1)"/>
        </update>
    </changeSet>
    <changeSet author="raffaele.pagano" id="add-anomalie-perla2018">
        <addColumn tableName="incarichi_repertorio">
            <column name="anomalia_perla" type="VARCHAR(1000)" remarks="Anomalia verificatasi in fase di ultima comunicazione al sistema PerlaPa."/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="inizio-gestione-pagopa">
        <createTable remarks="Tabella contenente le possibili tipologie di casistiche per le pendenze di Pagopa." tableName="tipo_pendenza_pagopa">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="descrizione" remarks="Descrizione del tipo di pendenza." type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="aux_digit" remarks="Aux Digit come da specifiche PagoPA." type="int">
                <constraints nullable="false"/>
            </column>
            <column name="application_code" remarks="Esistenza dell'Application Code" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="application_code_default" remarks="Application Code di default." type="VARCHAR(2)"/>
            <column name="codice_segregazione" remarks="Esistenza del codice di Segregazione" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="lunghezza_iuv_base" remarks="Lunghezza IUV Base" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="iuv_check_digit" remarks="Esistenza del check digit dello IUV" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="lunghezza_iuv" remarks="Lunghezza Codice IUV" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="tipo_pendenza_pagopa_pkey" tableName="tipo_pendenza_pagopa"/>

        <createTable remarks="Tabella contenente i periodi di validità per la gestione PagoPA." tableName="gestione_pagopa">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="id_tipo_pendenza_pagopa" remarks="Identificativo del tipo pendenza PagoPA." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="dt_ini_validita" remarks="Data Inizio Validita" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="dt_fin_validita" remarks="Data Fine Validita" type="${date.type}"/>
            <column name="posizione_debitoria" remarks="Attiva la gestione della posizione debitoria" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="posizione_creditoria" remarks="Attiva la gestione della posizione creditoria" type="CHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="gestione_pagopa_pkey" tableName="gestione_pagopa"/>

        <createTable remarks="Tabella contenente le posizioni di PAGOPA." tableName="pendenza_pagopa">
            <column name="id" remarks="Chiave Primaria." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="esercizio" remarks="Esercizio." type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Codice UO che ha registrato la posizione." type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="tipo_posizione" remarks="Tipo Posizione PagoPA. D: Debitoria, C: Creditoria" type="VARCHAR(1)">
                <constraints nullable="false"/>
            </column>
            <column name="id_tipo_pendenza_pagopa" remarks="ID Tipo Pendenza PagoPA." type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cd_avviso" remarks="Codice Avviso" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="stato" remarks="Stato. VAL: Valido" type="VARCHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="dt_scadenza" remarks="Data scadenza" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="note" remarks="Note" type="VARCHAR(2000)"/>
            <column name="dacr" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="pendenza_pagopa_pkey" tableName="pendenza_pagopa"/>

        <addForeignKeyConstraint baseColumnNames="cd_unita_organizzativa" baseTableName="pendenza_pagopa" constraintName="fk_pendenza_pagopa01" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_unita_organizzativa" referencedTableName="unita_organizzativa"/>

        <createIndex indexName="FX_PENDENZA_PAGOPA01" tableName="pendenza_pagopa">
            <column name="cd_unita_organizzativa"/>
        </createIndex>

        <createIndex indexName="IX_PENDENZA_PAGOPA02" tableName="pendenza_pagopa">
            <column name="cd_avviso"/>
            <column name="tipo_posizione"/>
        </createIndex>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_tipo_pendenza_pagopa_add_divisor">
        <addColumn tableName="tipo_pendenza_pagopa">
            <column name="divisore_check_digit" remarks="Divisore per Check Digit" type="INT"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="accessi-pagopa">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPENDENZAPAGOPAM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione PagoPA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPENDENZAPAGOPAV"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione PagoPA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPENDENZAPAGOPAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDPendenzaPagopaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPENDENZAPAGOPAV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDPendenzaPagopaBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.PAGOPA"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="PagoPA"/>
            <column name="pg_ordinamento" type="BIGINT" value="15"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="PAGOPA"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM"/>
            <column name="url_icona" type="VARCHAR(200)" value="book_closed.gif"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.PAGOPA.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPENDENZAPAGOPAM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDPendenzaPagopaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.PAGOPA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.PAGOPA.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPENDENZAPAGOPAV"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDPendenzaPagopaBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.PAGOPA"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="insert-base-pagopa">
        <insert tableName="tipo_pendenza_pagopa" dbms="oracle">
            <column name="id" type="NUMERIC" value="1"/>
            <column name="descrizione" type="STRING" value="Aux Digit 0"/>
            <column name="aux_digit" type="NUMERIC" value="0"/>
            <column name="application_code" type="STRING" value="Y"/>
            <column name="application_code_default" type="STRING" value="00"/>
            <column name="codice_segregazione" type="STRING" value="N"/>
            <column name="lunghezza_iuv_base" type="NUMERIC" value="13"/>
            <column name="iuv_check_digit" type="STRING" value="Y"/>
            <column name="lunghezza_iuv" type="NUMERIC" value="15"/>
            <column name="divisore_check_digit" type="NUMERIC" value="93"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="tipo_pendenza_pagopa" dbms="oracle">
            <column name="id" type="NUMERIC" value="2"/>
            <column name="descrizione" type="STRING" value="Aux Digit 1"/>
            <column name="aux_digit" type="NUMERIC" value="1"/>
            <column name="application_code" type="STRING" value="N"/>
            <column name="codice_segregazione" type="STRING" value="N"/>
            <column name="lunghezza_iuv_base" type="NUMERIC" value="17"/>
            <column name="iuv_check_digit" type="STRING" value="N"/>
            <column name="lunghezza_iuv" type="NUMERIC" value="17"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="tipo_pendenza_pagopa" dbms="oracle">
            <column name="id" type="NUMERIC" value="3"/>
            <column name="descrizione" type="STRING" value="Aux Digit 2"/>
            <column name="aux_digit" type="NUMERIC" value="2"/>
            <column name="application_code" type="STRING" value="N"/>
            <column name="codice_segregazione" type="STRING" value="N"/>
            <column name="lunghezza_iuv_base" type="NUMERIC" value="15"/>
            <column name="iuv_check_digit" type="STRING" value="Y"/>
            <column name="lunghezza_iuv" type="NUMERIC" value="17"/>
            <column name="divisore_check_digit" type="NUMERIC" value="93"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="tipo_pendenza_pagopa" dbms="oracle">
            <column name="id" type="NUMERIC" value="4"/>
            <column name="descrizione" type="STRING" value="Aux Digit 3"/>
            <column name="aux_digit" type="NUMERIC" value="3"/>
            <column name="application_code" type="STRING" value="N"/>
            <column name="codice_segregazione" type="STRING" value="Y"/>
            <column name="lunghezza_iuv_base" type="NUMERIC" value="13"/>
            <column name="iuv_check_digit" type="STRING" value="Y"/>
            <column name="lunghezza_iuv" type="NUMERIC" value="17"/>
            <column name="divisore_check_digit" type="NUMERIC" value="93"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="gestione_pagopa" dbms="oracle">
            <column name="id" type="NUMERIC" value="1"/>
            <column name="id_tipo_pendenza_pagopa" type="NUMERIC" value="1"/>
            <column name="dt_ini_validita" type="${date.type}" valueDate="to_Date('01012002','ddmmyyyy')"/>
            <column name="posizione_debitoria" type="STRING" value="N"/>
            <column name="posizione_creditoria" type="STRING" value="N"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_pendenza_pagopa_add_column_doc_amm">
        <addColumn tableName="pendenza_pagopa">
            <column name="importo_pendenza" remarks="Importo Pendenza" type="numeric(15, 2)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_tipo_doc_amm" remarks="Tipo del documento amministrativo collegato. Dominio:
FATTURA_A = Fattura attiva
FATTURA_P = Fattura passiva
GENERICO_E = Generico di entrata
GENERICO_S = Generico di spesa" type="VARCHAR(10)"/>
            <column name="cd_cds_doc_amm" remarks="Cds del documento amministrativo collegato" type="VARCHAR(30)"/>
            <column name="cd_uo_doc_amm" remarks="Cds del documento amministrativo collegato" type="VARCHAR(30)"/>
            <column name="esercizio_doc_amm" remarks="Esercizio del documento amministrativo collegato" type="SMALLINT"/>
            <column name="pg_doc_amm" remarks="Progressivo del documento amministrativo collegato" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter-pendenza_pagopa-add-codice_iuv">
        <addColumn tableName="pendenza_pagopa">
            <column name="cd_iuv" remarks="Codice IUV" type="VARCHAR(50)"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="alter_pendenza_pagopa_add_columns">
        <addColumn tableName="pendenza_pagopa">
            <column name="descrizione" remarks="Descrizione Pendenza PagoPA" type="VARCHAR(2000)"/>
            <column name="cd_terzo" remarks="Codice Terzo" type="BIGINT"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="cd_terzo" baseTableName="pendenza_pagopa" constraintName="fk_pendenza_pagopa02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="cd_terzo" referencedTableName="terzo"/>

        <createIndex indexName="IX_pendenza_pagopa03" tableName="pendenza_pagopa">
            <column name="cd_terzo"/>
        </createIndex>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="modify_cu_2020">
        <addColumn tableName="estrazione_cud">
            <column name="gg_periodo_lavoro_sem1" remarks="Giorni Periodo Lavoro primo semestre per riduzione cuneo" type="BIGINT"/>
            <column name="gg_periodo_lavoro_sem2" remarks="Giorni Periodo Lavoro secondo semestre per riduzione cuneo" type="BIGINT"/>
            <column name="ult_detr_cuneo_fisc" remarks="ULTERIORE DETRAZIONE CUNEO FISCALE" type="numeric(15, 2)"/>
            <column name="tratt_int_erog_cuneo_fisc" remarks="TRATTAMENTO INTEGRATIVO EROGATO CUNEO FISCALE" type="numeric(15, 2)"/>
            <column name="tratt_int_cong_cuneo_fisc" remarks="TRATTAMENTO INTEGRATIVO RECUPERATO ENTRO CONGUAGLIO CUNEO FISCALE" type="numeric(15, 2)"/>
        </addColumn>
        <addColumn tableName="estrazione_cud_dett">
            <column name="DETRAZIONE_RID_CUNEO_NETTO" remarks="DETRAZIONE RIDUZIONE CUNEO SU COMPENSI" type="numeric(15, 2)"/>
            <column name="im_rid_cuneo_erogato" remarks="DETRAZIONE RIDUZIONE CUNEO EROGATA" type="numeric(15, 2)"/>
            <column name="im_credito_irpef_dovuto" remarks="CREDITO IRPEF DOVUTO CALCOLATO IN CONGUAGLIO" type="numeric(15, 2)"/>
            <column name="im_credito_irpef_goduto" remarks="CREDITO IRPEF GODUTO CALCOLATO IN CONGUAGLIO" type="numeric(15, 2)"/>
            <column name="im_detr_rid_cuneo_dovuto_cong" remarks="DETRAZIONE RIDUZIONE CUNEO DOVUTA CALCOLATO IN CONGUAGLIO" type="numeric(15, 2)"/>
            <column name="im_detr_rid_cuneo_goduto_cong" remarks="DETRAZIONE RIDUZIONE CUNEO GODUTA CALCOLATO IN CONGUAGLIO" type="numeric(15, 2)"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="addColumn_fattura-attiva_ordine_elettr">
        <addColumn tableName="FATTURA_ATTIVA">
            <column name="FL_ORDINE_ELETTRONICO" type="VARCHAR(1)" remarks="Ordine Elettronico Y=Si N=No">
                <constraints nullable="true"/>
            </column>
            <column name="dt_ordine" remarks="Data Ordine" type="${date.type}">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="ins-num-posizione-creditoria-pagopa">
        <insert tableName="tipo_documento_amm">
            <column name="cd_tipo_documento_amm" type="STRING" value="POS_CRED"/>
            <column name="ds_tipo_documento_amm" type="STRING" value="Posizione Creditoria PagoPA"/>
            <column name="ti_entrata_spesa" type="STRING" value="E"/>
            <column name="fl_doc_generico" type="STRING" value="N"/>
            <column name="fl_utilizzo_doc_generico" type="STRING" value="N"/>
            <column name="fl_solo_partita_giro" type="STRING" value="N"/>
            <column name="fl_manrev_utente" type="STRING" value="N"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
        <insert tableName="numerazione_doc_amm">
            <column name="esercizio" type="NUMERIC" value="${liquibase.bootstrap.esercizio}"/>
            <column name="cd_cds" type="STRING" value="999"/>
            <column name="cd_unita_organizzativa" type="STRING" value="999.000"/>
            <column name="cd_tipo_documento_amm" type="STRING" value="POS_CRED"/>
            <column name="corrente" type="NUMERIC" value="0"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-cons-gae-res-spe-voc">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGCONSGAERESSPEVOC"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Consultazione GAE Residui Spesa Voci"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGCONSGAERESSPEVOC"/>
            <column name="business_process" type="VARCHAR(200)" value="ConsGAEResSpeVocBP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="raffaele.pagano" id="alter_movimento_coge_add_columns">
        <addColumn tableName="movimento_coge">
            <column name="ti_riga" remarks="Tipologia della riga.
IVAS = IVA ACQUISTO SPLIT; GEN = GENERICO; RIC = RICAVO; IVAA = IVA ACQUISTO; CRE = CREDITO; DEB = DEBITO; COS = COSTO; CSP = CESPITE; IVVS = IVA VENDITE SPLIT; IVAV = IVA VENDITA" type="VARCHAR(4)"/>
            <column name="cd_tipo_documento" remarks="Codice del tipo di documento" type="VARCHAR(10)"/>
            <column name="cd_cds_documento" remarks="Codice identificativo dell'unità organizzativa o CDS" type="VARCHAR(30)"/>
            <column name="cd_uo_documento" remarks="Codice identificativo dell'unità organizzativa o CDS" type="VARCHAR(30)"/>
            <column name="esercizio_documento" remarks="Esercizio del documento amministrativo" type="SMALLINT"/>
            <column name="pg_numero_documento" remarks="Progressivo del documento" type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet author="raffaele.pagano" id="incarichi-parametri-add-column-allega-attestazione-direttore">
        <addColumn tableName="incarichi_parametri">
            <column name="allega_attestazione_direttore" type="CHAR(1)"/>
        </addColumn>
    </changeSet>
    <changeSet id="voce_menu_stampeo_mag" author="ciro.salvio">
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.MAG.STAMPE"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Stampe"/>
            <column name="pg_ordinamento" type="BIGINT" value="101"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="2"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="STAMPE"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.MAG"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>

    <changeSet id="voce_menu_stampa_mag_consumi" author="ciro.salvio">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="MAGSTAMPACONS"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Stampa Consumi"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="MAGSTAMPACONS"/>
            <column name="business_process" type="VARCHAR(200)" value="StampaConsumiBP"/>
            <!--<column name="ti_funzione" type="CHAR(1)" value="M"/>-->
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.MAG.STAMPE.CONSUMI"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Stampa Consumi"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="MAGSTAMPACONS"/>
            <column name="business_process" type="VARCHAR(200)" value="StampaConsumiBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="8"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="MAGSTAMPACONS"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.MAG.STAMPE"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="ciro.salvio" id="stampa_consumi">
        <insert tableName="print_priority">
            <column name="report_name" type="VARCHAR(1500)" value="/ordmag/iss/magazzino/stampa_consumi.jasper"/>
            <column name="priority" type="SMALLINT"  value="1" />
            <column name="ds_report" type="VARCHAR(300)" value="Stampa Consumi"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="ciro.salvio" id="alter_print_priority_report_name_ente">
        <addColumn tableName="PRINT_PRIORITY">
            <column name="report_name_ente"
                    remarks="Nome del report per l'ENTE comprensivo di percorso relativo alla cartella reports, nel fomrato UNIX es. /preventivo/pdg/pdgdett_voce_funzione_natura.rpt"
                    type="VARCHAR(1500)" >
                 <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="voce_menu_gestione_stampe" author="ciro.salvio">
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.CFGSTMP"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Configurazione Stampe"/>
            <column name="pg_ordinamento" type="BIGINT" value="155"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="2"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="CFGSTMP"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet id="voce_menu_print_priority" author="ciro.salvio">
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.CFGSTMP.STPPRIORIY"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Gestione Priority"/>
            <column name="pg_ordinamento" type="BIGINT" value="5"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="5"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="STPPRIORIY"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.CFGSTMP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPRTPRIORITYV"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Visualizzazione Print Priority"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPRTPRIORITYV"/>
            <column name="business_process" type="VARCHAR(200)" value="ConfigPrintPriorityBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="V"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.CFGSTMP.STPPRIORIY.V"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Visualizzazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPRTPRIORITYV"/>
            <column name="business_process" type="VARCHAR(200)" value="ConfigPrintPriorityBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="5"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="V"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.CFGSTMP.STPPRIORIY"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
        </insert>
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPRTPRIORITYM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Gestione Print Priority"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPRTPRIORITYM"/>
            <column name="business_process" type="VARCHAR(200)" value="ConfigPrintPriorityBP"/>
            <column name="ti_funzione" type="CHAR(1)" value="M"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.CFG.CFGSTMP.STPPRIORIY.M"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Gestione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGPRTPRIORITYM"/>
            <column name="business_process" type="VARCHAR(200)" value="ConfigPrintPriorityBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="6"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="M"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.CFG.CFGSTMP.STPPRIORIY"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="1"/>
        </insert>
    </changeSet>
    <changeSet id="voce_menu_stampa_mag_inventario" author="ciro.salvio">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="MAGSTAMPAINV"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Stampa Inventario"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="MAGSTAMPAINV"/>
            <column name="business_process" type="VARCHAR(200)" value="StampaInventarioBP"/>
            <!--<column name="ti_funzione" type="CHAR(1)" value="M"/>-->
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>

        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.MAG.STAMPE.INVENTARIO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Stampa Inventario"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="MAGSTAMPAINV"/>
            <column name="business_process" type="VARCHAR(200)" value="StampaInventarioBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="INVENTARIO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.MAG.STAMPE"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="ciro.salvio" id="update-table-albero-main-stampa-consumi">
        <update tableName="albero_main">
            <column name="cd_proprio_nodo" value='CONSUMI' type="VARCHAR(100)"/>
            <column name="pg_ordinamento" value="5" type="BIGINT"/>
            <where>cd_nodo='0.MAG.STAMPE.CONSUMI'</where>
        </update>
    </changeSet>
    <changeSet author="ciro.salvio" id="print_priority_stampa_inventario">
        <insert tableName="print_priority">
            <column name="report_name" type="VARCHAR(1500)" value="/ordmag/magazzino/stampa_inventario.jasper"/>
            <column name="priority" type="SMALLINT"  value="1" />
            <column name="ds_report" type="VARCHAR(300)" value="Stampa Inventario"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="create-table-inventariazione">
        <createTable remarks="Inventariazione beni da Ordini." tableName="transito_beni_ordini">
            <column name="id" remarks="Chiave Primaria." type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="id_movimenti_mag" remarks="Identificativo del movimento di carico di magazzino" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="PG_INVENTARIO" remarks=" Codice dell''inventario." type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="ds_bene" remarks="Descrizione del bene" type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="ti_ammortamento" remarks="Tipologia dell'ammortamento.&#10;Il Dominio:&#10;O = Ordinario&#10;A = Accelerato&#10;L = aLtro" type="CHAR(1)"/>
            <column name="fl_ammortamento" remarks="Indica se il bene deve essere ammortizzato.&#10;Il Dominio:&#10;Y = subisce ammortamento&#10;N = Non subisce ammortamento" type="CHAR(1)"/>
            <column name="cd_condizione_bene" remarks="Codice della condizione del bene di inventario" type="VARCHAR(10)">
                <constraints nullable="true"/>
            </column>
            <column name="ti_commerciale_istituzionale" remarks="Flag per identificare se il bene risulta essere commerciale o istituzionale" type="CHAR(1)">
                <constraints nullable="true"/>
            </column>
            <column name="valore_iniziale" remarks="Valore iniziale" type="numeric(20, 6)">
                <constraints nullable="false"/>
            </column>
            <column name="collocazione" remarks="Descrizione della Collocazione (valorizzato in caso il bene sia un libro)" type="VARCHAR(50)"/>
            <column name="cd_cds" remarks="Codice cds" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_unita_organizzativa" remarks="Codice dell&quot;unità organizzativa ottenuto per concatenzione del codice del CDS di afferenza e del proprio codice" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="cd_ubicazione" remarks="Codice del'ubicazione completa della gerarchia" type="VARCHAR(30)">
                <constraints nullable="true"/>
            </column>
            <column name="cd_assegnatario" remarks="Progressivo identificativo del terzo (secondo livello dell'entità anagrafica)" type="INT"/>
            <column name="dacr" remarks="Data di creazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utcr" remarks="Utenza di creazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="duva" remarks="Data di ultima variazione del record" type="${date.type}">
                <constraints nullable="false"/>
            </column>
            <column name="utuv" remarks="Utenza di ultima variazione del record" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="pg_ver_rec" remarks="Progressivo di versione del record: viene incrementato di 1 ad ogni variazione" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="etichetta" type="VARCHAR(50)">
                <constraints nullable="true"/>
            </column>
            <column name="esercizio_carico_bene" remarks="Indica l'esercizio di competenza del carico del bene nel patrimonio aziendale" type="SMALLINT">
                <constraints nullable="true"/>
            </column>
            <column name="dt_acquisizione" remarks="Data di acquisizione del bene" type="${date.type}"/>
            <column name="cd_barre" remarks="Codice a Barre" type="INT"/>
            <column name="targa" remarks="Numero targa" type="VARCHAR(8)"/>
            <column name="seriale" type="VARCHAR(25)"/>
        </createTable>

        <addPrimaryKey columnNames="id" constraintName="transito_beni_ordini_pkey" tableName="transito_beni_ordini"/>
        <createSequence sequenceName="CNRSEQ00_TRANSITO_BENI_ORDINI"/>
        <addColumn tableName="tipo_carico_scarico">
            <column name="fl_da_ordini" type="CHAR(1)" defaultValue="N" remarks="Indica se il tipo carico deriva da ordini">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-columns-for-carico-ordine-evasione-forzata">
        <addColumn tableName="evasione_ordine_riga">
            <column name="id_movimenti_mag" remarks="Identificativo del movimento di carico di magazzino" type="BIGINT"/>
        </addColumn>
        <addColumn tableName="ordine_acq_consegna">
            <column name="quantita_orig" remarks="Quantità ordine originale nel caso di evasione forzata in fase di carico ordine" type="numeric(12, 5)"/>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="remove-table-transito_beni_ordini-not-null-uo-cds">
        <dropNotNullConstraint
                columnName="cd_unita_organizzativa"
                tableName="transito_beni_ordini"
                columnDataType="VARCHAR(30)"/>
        <dropNotNullConstraint
                columnName="cd_cds"
                tableName="transito_beni_ordini"
                columnDataType="VARCHAR(30)"/>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-invent-beni-ordini">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGINVENTBENIORDINIM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Inventariazione Beni da ordini"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGINVENTBENIORDINIM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTransitoBeniOrdiniBP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.INVENT.ORDINI"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Inventariazione da Ordini"/>
            <column name="pg_ordinamento" type="BIGINT" value="10"/>
            <column name="fl_terminale" type="CHAR(1)" value="N"/>
            <column name="livello" type="SMALLINT" value="3"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="ORDINI"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.INVENT"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.INVENT.ORDINI.BENI_TRANSITO"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Beni in Transito"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGINVENTBENIORDINIM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDTransitoBeniOrdiniBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="BENI_TRANSITO"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.INVENT.ORDINI"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-column-default_ordine-condizione_bene">
        <addColumn tableName="condizione_bene">
            <column name="fl_default_ordine" type="CHAR(1)" defaultValue="N" remarks="Condizione bene di default per il transito da ordine. Dominio: Y = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-inventariazione-automatica">
        <insert tableName="accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGINVENTAUTOMM"/>
            <column name="ti_accesso" type="CHAR(1)" value="D"/>
            <column name="ds_accesso" type="VARCHAR(200)" value="Inventariazione"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="ass_bp_accesso">
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGINVENTAUTOMM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDSelezionatoreBeniInTransitoBP"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
        <insert tableName="albero_main">
            <column name="cd_nodo" type="VARCHAR(100)" value="0.AMM.INVENT.ORDINI.INVENTARIAZIONE"/>
            <column name="ds_nodo" type="VARCHAR(200)" value="Inventariazione"/>
            <column name="cd_accesso" type="VARCHAR(20)" value="CFGINVENTAUTOMM"/>
            <column name="business_process" type="VARCHAR(200)" value="CRUDSelezionatoreBeniInTransitoBP"/>
            <column name="pg_ordinamento" type="BIGINT" value="1"/>
            <column name="fl_terminale" type="CHAR(1)" value="Y"/>
            <column name="livello" type="SMALLINT" value="4"/>
            <column name="cd_proprio_nodo" type="VARCHAR(100)" value="INVENTARIAZIONE"/>
            <column name="cd_nodo_padre" type="VARCHAR(100)" value="0.AMM.INVENT.ORDINI"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="VARCHAR(20)" value="SYSTEM"/>
            <column name="pg_ver_rec" type="BIGINT" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="update-ordinamento-inventariazione">
        <update tableName="albero_main">
            <column name="pg_ordinamento" value='2' type="BIGINT"/>
            <where>cd_nodo = '0.AMM.INVENT.ORDINI.INVENTARIAZIONE'</where>
        </update>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-column-stato_transito_beni_ordini">
        <addColumn tableName="transito_beni_ordini">
            <column name="stato" type="CHAR(3)" defaultValue="INS" remarks="Stato del bene in transito da ordine. Valori Possibili: INS=Inserito, ANN=Eliminato, COM=Completo, TRA=Trasferito">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="gianfranco.gasparro" id="add-column-inventario_beni-id_transito_beni_ordini">
        <addColumn tableName="inventario_beni">
            <column name="id_transito_beni_ordini" type="BIGINT" remarks="Identificativo del transito beni da ordini"/>
        </addColumn>
        <addForeignKeyConstraint baseColumnNames="id_transito_beni_ordini" baseTableName="inventario_beni" constraintName="fk_inventario_beni05" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="transito_beni_ordini"/>

        <addForeignKeyConstraint baseColumnNames="id_movimenti_mag" baseTableName="transito_beni_ordini" constraintName="fk_transito_beni_ordini00" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="pg_movimento" referencedTableName="movimenti_mag"/>

        <createIndex indexName="FX_INVENTARIO_BENI05" tableName="inventario_beni">
            <column name="id_transito_beni_ordini"/>
        </createIndex>
        <createIndex indexName="FX_TRANSITO_BENI_ORDINI00" tableName="transito_beni_ordini">
            <column name="id_movimenti_mag"/>
        </createIndex>
    </changeSet>
    <changeSet author="raffaele.pagano" id="alter_movimento_coge_add_columns_2">
        <addColumn tableName="movimento_coge">
            <column name="fl_modificabile" type="CHAR(1)" defaultValue="Y" remarks="Indica se la riga e' modificabile dall'utente - Dominio: S = Sì; N = No;.">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="marco.spasiano" id="configurazione-add-economico-patrimoniale-tipo-economico-patrimoniale">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" valueNumeric="${esercizio_corrente}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="ECONOMICO_PATRIMONIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="TIPO_ECONOMICO_PATRIMONIALE"/>
            <column name="val01" type="STRING" value="N"/>
            <column name="val02" type="STRING" value="N"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="raffaele.pagano" id="configurazione-add-economico-patrimoniale-ass-conti">
        <insert tableName="configurazione_cnr">
            <column name="esercizio" type="NUMERIC" valueNumeric="${esercizio_corrente}"/>
            <column name="cd_unita_funzionale" type="STRING" value="*"/>
            <column name="cd_chiave_primaria" type="STRING" value="ECONOMICO_PATRIMONIALE"/>
            <column name="cd_chiave_secondaria" type="STRING" value="ASSOCIAZIONE_CONTI"/>
            <column name="val01" type="STRING" value="TERZO"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>
    <changeSet author="raffaele.pagano" id="addColumn_anagrafico_esercizio_conto_debito_credito_ep">
        <addColumn tableName="ANAGRAFICO_ESERCIZIO">
            <column name="ESERCIZIO_VOCE_DEBITO_EP" type="SMALLINT" remarks="Anno di esercizio del conto del piano economico da utilizzare per la rilevazione del debito"/>
            <column name="CD_VOCE_DEBITO_EP" type="VARCHAR(45)" remarks="Identificativo del conto del piano economico da utilizzare per la rilevazione del debito"/>
            <column name="ESERCIZIO_VOCE_CREDITO_EP" type="SMALLINT" remarks="Anno di esercizio del conto del piano economico da utilizzare per la rilevazione del credito"/>
            <column name="CD_VOCE_CREDITO_EP" type="VARCHAR(45)" remarks="Identificativo del conto del piano economico da utilizzare per la rilevazione del credito"/>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="ESERCIZIO_VOCE_DEBITO_EP, CD_VOCE_DEBITO_EP" baseTableName="ANAGRAFICO_ESERCIZIO" constraintName="FK_ANAGRAFICO_ESERCIZIO02" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ESERCIZIO, CD_VOCE_EP" referencedTableName="VOCE_EP"/>
        <addForeignKeyConstraint baseColumnNames="ESERCIZIO_VOCE_CREDITO_EP, CD_VOCE_CREDITO_EP" baseTableName="ANAGRAFICO_ESERCIZIO" constraintName="FK_ANAGRAFICO_ESERCIZIO03" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ESERCIZIO, CD_VOCE_EP" referencedTableName="VOCE_EP"/>

        <createIndex indexName="FX_ANAGRAFICO_ESERCIZIO02" tableName="ANAGRAFICO_ESERCIZIO">
            <column name="ESERCIZIO_VOCE_DEBITO_EP"/>
            <column name="CD_VOCE_DEBITO_EP"/>
        </createIndex>

        <createIndex indexName="FX_ANAGRAFICO_ESERCIZIO03" tableName="ANAGRAFICO_ESERCIZIO">
            <column name="ESERCIZIO_VOCE_CREDITO_EP"/>
            <column name="CD_VOCE_CREDITO_EP"/>
        </createIndex>
    </changeSet>

    <changeSet author="raffaele.pagano" id="inserimento-batch-apertura-anno-contabile">
        <insert tableName="batch_procedura">
            <column name="cd_procedura" type="STRING" value="RIBALTAMENTOPDGP"/>
            <column name="ds_procedura" type="STRING" value="Ribaltamento configurazione, str.organizzativa, anagrafica capitoli e piano dei conti."/>
            <column name="object_name" type="STRING" value="JOB_RIBALTAMENTO_PDGP"/>
            <column name="package_name" type="STRING" value="CNRMIG100"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>

        <insert tableName="batch_procedura_parametro">
            <column name="cd_procedura" type="STRING" value="RIBALTAMENTOPDGP"/>
            <column name="nome_parametro" type="STRING" value="AES"/>
            <column name="pg_valore_parametro" type="NUMERIC" value="1"/>
            <column name="valore_number" type="NUMERIC" value="2022"/>
            <column name="dacr" type="${date.type}" valueDate="${now}"/>
            <column name="utcr" type="STRING" value="SYSTEM"/>
            <column name="duva" type="${date.type}" valueDate="${now}"/>
            <column name="utuv" type="STRING" value="SYSTEM"/>
            <column name="pg_ver_rec" type="NUMERIC" value="0"/>
        </insert>
    </changeSet>

</databaseChangeLog>